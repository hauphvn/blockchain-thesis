	  window.convertflow==undefined?function(){function defineApp(){window.convertflow={};var app={actions:{},admin:{},campaigns:{},ctas:{},api:{ctas:{},areas:{}},helpers:{},visitors:{},website:{id:9054,brand:"dappuniversity.com",privacy_message:"",privacy_link:"",privacy_link_text:"",terms_link:"",terms_link_text:"",marketing_consent:"Yes, I&#39;d like to receive email communications",google_analytics_track:"true",google_analytics_category:"ConvertFlow",form_tracking:"true",url_identification:"true",profiles:{},powered_by:!0,actions:{},conditions:{},broadcasts:{},flows:{},stages:{},goals:{},ctas:{},integrations:{},conditions_groups:{}}};app.visitors.uid_cookie="cf_"+app.website.id+"_id",app.visitors.expiration_cookie="cf_"+app.website.id+"_person_time",app.visitors.localstorage_prevent="cf_"+app.website.id+"_person_storage_prevent",app.visitors.localstorage_last_update="cf_"+app.website.id+"_person_last_update",app.visitors.targeting_sync_status={},app.local_person="cf_"+app.website.id+"_person",app.interface_root="https://app.convertflow.com/websites/"+app.website.id+"/",app.api_root="https://app.convertflow.co/websites/"+app.website.id+"/",app.api_contacts_validate="https://convertflow.co/email-validation/",app.api_contacts=app.api_root+"contacts/",app.api_events=app.api_root+"events/",app.api_visitors=app.api_root+"visitors/",app.powered_by_link="https://www.convertflow.com/?utm_source=poweredby&utm_medium=cta&utm_campaign=default&utm_term=dappuniversity.com",app.geotargeting=!1,app.timed=-1<(-1<app.interface_root.indexOf("localhost")||location.search.indexOf("cfTime=true")),app.services=["activecampaign","autopilot","aweber","campaignmonitor","convertkit","drip","getresponse","hubspot","infusionsoft","klaviyo","leadsquared","mailchimp","ontraport","segment","sendinblue","wordpress"],app.live=-1==window.location.search.indexOf("iframe=true&variant="),1==app.live?app.assets_root="https://js.convertflow.co/production/websites/"+app.website.id+"/":app.assets_root=app.interface_root;var website=app.website,profile={id:9646,name:null,lastname:null,avatar:"https://www.gravatar.com/avatar/e10db81cb97fa81e675ad57cb5a52407?s=200&default=https://img.convertflow.co/static/avatar.jpg"};website.profiles[9646]=profile;var integration={id:7087,integration_type:"Mailchimp",targeting_sync_parameter:"mailchimp_id",targeting_sync_tracking:"",targeting_sync_id_type:"email",actions_map:{"Mailchimp - Add to list":{method:"add",endpoint:"lists",data:"list_id",list:"lists",list_is_targetable:!0},"Mailchimp - Add to list with confirmation":{method:"add",endpoint:"lists",data:"list_id",list:"lists",list_is_targetable:!0},"Mailchimp - Unsubscribe from list":{method:"remove",endpoint:"lists",data:"list_id",list:"lists",list_is_targetable:!0},"Mailchimp - Add to group":{method:"add",endpoint:"groups",data:"group_id",list:"groups",list_is_targetable:!0},"Mailchimp - Remove from group":{method:"remove",endpoint:"groups",data:"group_id",list:"groups",list_is_targetable:!0},"Mailchimp - Add a tag":{method:"add",endpoint:"tags",data:"segment_id",list:"tags",list_is_targetable:!0},"Mailchimp - Remove a tag":{method:"remove",endpoint:"tags",data:"segment_id",list:"tags",list_is_targetable:!0},"Mailchimp - Make subscriber VIP":{method:"add",endpoint:"deals",data:"list_id",list:"lists"},"Mailchimp - Remove VIP status from subscriber":{method:"remove",endpoint:"deals",data:"list_id",list:"lists"}}};website.integrations[7087]=integration;var cta={id:40233,name:"Launch Pop Up",options:{published_at:"2019-12-14T15:26:59+00:00"},cta_type:"overlay"};website.ctas[40233]=cta;var broadcast={id:25299,name:"Accelerator Pop Up",quick:!0,timezone:null,range_start:null,range_end:null,timeframe:!1,conditions:{},ctas:[40233]};return broadcast.conditions[125036]={condition_type:"Everywhere",url:null,tag_id:null,keyword:null,count:0,data_name:null,area_id:null,cta_id:null,data:null,operator:"and",condition_cta:0,country:null},website.broadcasts[25299]=broadcast,app.website=website,app}function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:undefined};var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt}function initialize(app){if(1==app.timed&&(console.time("Person load"),console.time("CTA inject")),1==app.live){if(app.ctas.locallystored(),app.helpers.getCookie(app.visitors.uid_cookie)==undefined)app.visitors.create(),app.ctas.findSnippets();else{var localperson=app.helpers.decompressAndGet(app.local_person);0==app.visitors.canUseLocal(localperson)?app.visitors.get():app.visitors.identifyOrTarget(localperson)}app.visitors.trackingUIDs(),app.visitors.trackSubmits()}else{var person={id:null,name:null,created_at:null,updated_at:null,email:null,user_id:null,owner_id:null,phone:null,city:null,leadhook_id:null,contactable_id:null,contactable_type:null,avatar_file_name:null,avatar_content_type:null,avatar_file_size:null,avatar_updated_at:null,avatar_url:null,company_name:null,company_title:null,url:null,state:null,twitter_url:null,facebook_url:null,linkedin_url:null,twitter_followers:null,twitter_following:null,lead_value:null,customer_ltv:null,twitter_handle:null,last_name:null,address:null,zip_code:null,country:null,view:null,website_id:null,source_url:null,company_id:null,pref_id:null,visitor_token:null,flow_id:null,stage_id:null,extra:null,broadcast_id:null,goal_id:null,opportunity_id:null,recent_event:null,bio:null,referral_id:null,person_id:null,intercom_id:null,variant_id:null,drip_id:null,data:null,inf_id:null,first_visit:null,referral_source:null,utm_source:null,utm_medium:null,utm_campaign:null,utm_term:null,utm_content:null,privacy_consent:null,marketing_consent:null,ip_address:null,visitor_token:"51730cc1-e3ab-475f-9844-4193d9ff316d"};person.website_id=app.website.id,person.data={},person.extra={},window.convertflow.person=person,app.ctas.findSnippets()}}function usejQuery(app){window.jQuery!==undefined&&(window.prevjQuery=window.jQuery);var scriptLoadHandler=function(){$cf=jQuery.noConflict(!0),window.prevjQuery!==undefined&&(jQuery=window.prevjQuery),initialize(app)};if(window.jQuery===undefined||window.jQuery.ajax==undefined||window.jQuery.validator!==undefined||jQuery.fn.jquery!==undefined&&parseInt(jQuery.fn.jquery.split(".")[0])<2&&parseInt(jQuery.fn.jquery.split(".")[1])<8){var script_tag=document.createElement("script");script_tag.setAttribute("type","text/javascript"),script_tag.setAttribute("src","https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"),script_tag.readyState?script_tag.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||scriptLoadHandler()}:script_tag.onload=function(){scriptLoadHandler()},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(script_tag)}else $cf=window.jQuery,-1<location.search.indexOf("cfTime=true")&&console.log("Existing jQuery is "+$cf.fn.jquery),initialize(app)}var app=defineApp();app.actions.mapEventToActions=function(event){var foreign_keys={Complete:["element_id"],Completion:["goal_id","broadcast_id"]}[event.event_type];foreign_keys&&foreign_keys.forEach(function(foreign_key){if(event[foreign_key]){var contactable_type=foreign_key.replace("_id","");$cf.map(app.website.actions,function(action){if(action.contactable_type.toLowerCase()==contactable_type&&action.contactable_id==event[foreign_key])return action}).forEach(function(action){app.actions.run(action,event)})}})},app.actions.run=function(action){if(0<action.action_type.indexOf(" - "))var integration_type=action.action_type.split(" - ")[0];if(!integration_type){if("Add a tag"==action.action_type&&(convertflow.person.data.tags=convertflow.person.data.tags||[],convertflow.person.data.tags.includes(action.tag_id)||convertflow.person.data.tags.push(action.tag_id),app.helpers.compressAndStore(app.local_person,convertflow.person)),"Remove a tag"==action.action_type){if(convertflow.person.data.tags=convertflow.person.data.tags||[],convertflow.person.data.tags&&convertflow.person.data.tags.includes(action.tag_id)){var tag_index=convertflow.person.data.tags.indexOf(action.tag_id);-1<tag_index&&convertflow.person.data.tags.splice(tag_index,1)}app.helpers.compressAndStore(app.local_person,convertflow.person)}if("Progress person to next stage"==action.action_type){var goal=app.website.goals[action.contactable_id],current_stage=app.website.stages[goal.stage_id],flow=app.website.flows[current_stage.flow_id],next_stage=$cf.map(app.website.stages,function(stage){if(stage.flow_id==current_stage.flow_id&&stage.position==current_stage.position+1)return stage})[0];if(next_stage&&flow){var flow_history=convertflow.person.data.flows||[];(flow_history=$cf.map(flow_history,function(flow){flow.id,flow.id})).push({id:flow.id,stage:next_stage.id,position:next_stage.position}),convertflow.person.data.flows=flow_history,app.helpers.compressAndStore(app.local_person,convertflow.person)}}if("Add them to a flow"==action.action_type)if(flow=app.website.flows[action.flow_id]){flow_history=convertflow.person.data.flows||[];(flow_history=$cf.map(flow_history,function(flow){flow.id,flow.id})).push({id:flow.id,stage:null,position:1}),convertflow.person.data.flows=flow_history,app.helpers.compressAndStore(app.local_person,convertflow.person)}if("Remove them from a flow"==action.action_type)if(flow=app.website.flows[action.flow_id]){flow_history=convertflow.person.data.flows||[],flow_history=$cf.map(flow_history,function(flow){flow.id,flow.id});convertflow.person.data.flows=flow_history,app.helpers.compressAndStore(app.local_person,convertflow.person)}if("Move them to a stage"==action.action_type){var stage=app.website.stages[action.stage_id];flow=app.website.flows[stage.flow_id];if(stage&&flow){flow_history=convertflow.person.data.flows||[];(flow_history=$cf.map(flow_history,function(flow){flow.id,flow.id})).push({id:flow.id,stage:stage.id,position:stage.position}),convertflow.person.data.flows=flow_history,app.helpers.compressAndStore(app.local_person,convertflow.person)}}}if(integration_type){var integration=$cf.map(app.website.integrations,function(integration){if(integration.integration_type==integration_type)return integration})[0];if(integration&&integration.actions_map[action.action_type]){var action_map=integration.actions_map[action.action_type];if(1==integration.actions_map[action.action_type].list_is_targetable){var method_type=action_map.method,array_name=action_map.list,targeting_data_key=integration_type.toLowerCase(),targeting_data=convertflow.person.data[targeting_data_key]||{},new_item_id=action.data[action_map.data]+"";targeting_data[array_name]=targeting_data[array_name]||[];var existing_item=$cf.map(targeting_data[array_name],function(item){if(item.id&&item.id+""==new_item_id)return item})[0];if("add"==method_type&&!existing_item){var new_item={id:new_item_id};targeting_data[array_name].push(new_item)}"remove"==method_type&&existing_item&&(targeting_data[array_name]=$cf.map(targeting_data[array_name],function(item){if(item.id&&item.id+""!==new_item_id)return item})),convertflow.person.data[targeting_data_key]=targeting_data,app.helpers.compressAndStore(app.local_person,convertflow.person)}}}},app.campaigns.initialize=function(website,admin_widget){1==app.timed&&console.timeEnd("Person load"),window.convertflow.snippetsLoaded==undefined&&app.ctas.findSnippets(),($cf.isEmptyObject(website.conditions)||1==app.campaigns.checkConditions(website.conditions))&&(website.status=!0,$cf.each(website.broadcasts,function(id,broadcast){var conditions=$cf.map(broadcast.conditions,function(condition){if(null==condition.cta_id&&"If area is"!==condition.condition_type)return condition});0==broadcast.quick&&(1==app.campaigns.checkConditions(conditions)||$cf.isEmptyObject(conditions))&&(0==broadcast.timeframe||parseInt(broadcast.range_start)<$cf.now()&&$cf.now()<parseInt(broadcast.range_end))&&(broadcast.status=!0,broadcast.campaign_type="broadcast",$cf.each(broadcast.ctas,function(index,cta_id){var cta_conditions=$cf.map(broadcast.conditions,function(condition){if(condition.cta_id==cta_id&&"If area is"!==condition.condition_type)return condition}),area_conditions=$cf.map(broadcast.conditions,function(condition){if(condition.cta_id==cta_id&&"If area is"==condition.condition_type)return condition});!$cf.isEmptyObject(cta_conditions)&&1!=app.campaigns.checkConditions(cta_conditions)||"inline"===app.website.ctas[cta_id].cta_type&&0!=$cf.isEmptyObject(area_conditions)||(app.website.ctas[cta_id].status=!0,app.website.ctas[cta_id].broadcast_id=broadcast.id,"inline"==app.website.ctas[cta_id].cta_type&&$cf.each(area_conditions,function(index,condition){convertflow.areas[condition.area_id]==undefined&&(convertflow.areas[condition.area_id]=cta_id)}),app.ctas.load(cta_id,broadcast))}))}),$cf.each(website.flows,function(flow_id,flow){if(convertflow.person.data.flows!==undefined)var person_flow=$cf.grep(convertflow.person.data.flows,function(f){return f.id==flow_id})[0];else person_flow=undefined;$cf.each(flow.stages,function(stage_id,stage){(1==(app.website.stages[stage_id]=stage).position&&(person_flow==undefined||1==person_flow.position)||person_flow!==undefined&&person_flow.position==stage.position)&&(stage.status=!0,$cf.each(stage.goals,function(goal_id,goal){app.website.goals[goal_id]=goal;var conditions=$cf.map(goal.conditions,function(condition){if(null==condition.cta_id&&"If area is"!==condition.condition_type)return condition});"cta"==goal.goal_type&&1==goal.live&&1==app.campaigns.checkConditions(conditions)&&(goal.status=!0,goal.campaign_type="goal",$cf.each(goal.ctas,function(index,cta_id){var cta_conditions=$cf.map(goal.conditions,function(condition){if(condition.cta_id==cta_id&&"If area is"!==condition.condition_type)return condition}),area_conditions=$cf.map(goal.conditions,function(condition){if(condition.cta_id==cta_id&&"If area is"==condition.condition_type)return condition});!$cf.isEmptyObject(cta_conditions)&&1!=app.campaigns.checkConditions(cta_conditions)||"inline"===app.website.ctas[cta_id].cta_type&&0!=$cf.isEmptyObject(area_conditions)||(app.website.ctas[cta_id].status=!0,app.website.ctas[cta_id].goal_id=goal.id,"inline"==app.website.ctas[cta_id].cta_type&&$cf.each(area_conditions,function(index,condition){convertflow.areas[condition.area_id]==undefined&&(convertflow.areas[condition.area_id]=cta_id)}),app.ctas.load(cta_id,goal))}))}))})}),$cf.each(website.broadcasts,function(id,standalone){var cta_id=standalone.ctas[0];if(1==standalone.quick&&1==app.campaigns.checkConditions(standalone.conditions)&&cta_id!==undefined&&(standalone.status=!0,"inline"!==app.website.ctas[cta_id].cta_type||0<$cf.map(standalone.conditions,function(condition){if("If area is"==condition.condition_type)return condition}).length)){if("inline"==app.website.ctas[cta_id].cta_type){var area_conditions=$cf.map(standalone.conditions,function(condition){if(condition.cta_id==cta_id&&"If area is"==condition.condition_type)return condition});$cf.each(area_conditions,function(index,condition){convertflow.areas[condition.area_id]==undefined&&(convertflow.areas[condition.area_id]=cta_id)})}$cf.each(standalone.ctas,function(index,cta_id){app.ctas.load(cta_id,standalone)})}})),!1!==admin_widget&&app.admin.initialize(website)},app.campaigns.checkConditions=function(conditions,person){if(window.convertflow!==undefined&&window.convertflow.person!==undefined)person=window.convertflow.person;else if(person!==undefined)person=person;else person={data:{}};var results=[],outcome=!1;if($cf.each(conditions,function(id,condition){if(condition.condition_type&&null!==condition.condition_type&&"null"!==condition.condition_type&&"If area is"!==condition.condition_type){var operator=condition.operator,result=!1,description={id:id,condition_type:condition.condition_type,value:condition_url,current_page:current_page,operator:operator},fullurl=window.location+window.location.search,service=condition.condition_type.split(" ").splice(-1)[0].toLowerCase();if(null!==condition.url)var condition_url=app.helpers.cleanURL(condition.url),current_page=app.helpers.cleanURL($cf(location).attr("href"));if("Everywhere"==condition.condition_type)result=!0;if("If page is"==condition.condition_type){if(condition_url==current_page)result=!0;condition.value=condition_url,description.current_page=current_page}if("If page is NOT"==condition.condition_type){if(condition_url!==current_page)result=!0;condition.value=condition_url,description.current_page=current_page}if("If URL contains"==condition.condition_type){if(-1<fullurl.indexOf(condition.keyword))result=!0;condition.value=condition.keyword}if("If URL does NOT contain"==condition.condition_type){if(-1==fullurl.indexOf(condition.keyword))result=!0;condition.value=condition.keyword}if("If visiting from city"==condition.condition_type){if(person.data.location!==undefined&&person.data.location.city!==undefined&&-1<person.data.location.city.toLowerCase().indexOf(condition.keyword.toLowerCase()))result=!0;condition.value=condition.keyword}if("If NOT visiting from city"==condition.condition_type){if(person.data.location==undefined||person.data.location.city==undefined||-1==person.data.location.city.toLowerCase().indexOf(condition.keyword.toLowerCase()))result=!0;condition.value=condition.keyword}if("If visiting from region"==condition.condition_type){if(person.data.location!==undefined&&person.data.location.regionName!==undefined&&-1<person.data.location.regionName.toLowerCase().indexOf(condition.keyword.toLowerCase()))result=!0;condition.value=condition.keyword}if("If NOT visiting from region"==condition.condition_type){if(person.data.location==undefined||person.data.location.regionName==undefined||-1==person.data.location.regionName.toLowerCase().indexOf(condition.keyword.toLowerCase()))result=!0;condition.value=condition.keyword}if("If visiting from country"==condition.condition_type){if(person.data.location!==undefined&&person.data.location.countryCode!==undefined&&-1<person.data.location.countryCode.indexOf(condition.country))result=!0;condition.value=condition.country}if("If NOT visiting from country"==condition.condition_type){if(person.data.location==undefined||person.data.location.countryCode==undefined||-1==person.data.location.countryCode.indexOf(condition.country))result=!0;condition.value=condition.country}if("If visiting ConvertFlow landing page"==condition.condition_type){if(!condition.condition_cta||condition.condition_cta==$cf(".convertflow-cta.cf-page").parent().attr("cta-id"))result=!0;condition.value=condition.condition_cta}if("If person has viewed CTA"==condition.condition_type){if(person.data.campaigns!==undefined&&person.data.campaigns.ctas!==undefined&&person.data.campaigns.ctas[condition.condition_cta]!==undefined&&person.data.campaigns.ctas[condition.condition_cta].stats!==undefined&&person.data.campaigns.ctas[condition.condition_cta].stats.View!==undefined)result=!0;condition.value=condition.condition_cta}if("If person has NOT viewed CTA"==condition.condition_type){if(person.data.campaigns==undefined||person.data.campaigns.ctas==undefined||person.data.campaigns.ctas[condition.condition_cta]==undefined||person.data.campaigns.ctas[condition.condition_cta].stats==undefined||person.data.campaigns.ctas[condition.condition_cta].stats.View==undefined)result=!0;condition.value=condition.condition_cta}if("If person has engaged with CTA"==condition.condition_type||"If person has converted with CTA"==condition.condition_type){if(person.data.campaigns!==undefined&&person.data.campaigns.ctas!==undefined&&person.data.campaigns.ctas[condition.condition_cta]!==undefined&&person.data.campaigns.ctas[condition.condition_cta].stats!==undefined&&person.data.campaigns.ctas[condition.condition_cta].stats.Complete!==undefined)result=!0;condition.value=condition.condition_cta}if("If person has NOT engaged with CTA"==condition.condition_type||"If person has NOT converted with CTA"==condition.condition_type){if(person.data.campaigns==undefined||person.data.campaigns.ctas==undefined||person.data.campaigns.ctas[condition.condition_cta]==undefined||person.data.campaigns.ctas[condition.condition_cta].stats==undefined||person.data.campaigns.ctas[condition.condition_cta].stats.Complete==undefined)result=!0;condition.value=condition.condition_cta}if("If person has completed CTA"==condition.condition_type){if(person.data.campaigns!==undefined&&person.data.campaigns.ctas!==undefined&&person.data.campaigns.ctas[condition.condition_cta]!==undefined&&person.data.campaigns.ctas[condition.condition_cta].stats!==undefined&&person.data.campaigns.ctas[condition.condition_cta].stats.Completion!==undefined)result=!0;condition.value=condition.condition_cta}if("If person has NOT completed CTA"==condition.condition_type){if(person.data.campaigns==undefined||person.data.campaigns.ctas==undefined||person.data.campaigns.ctas[condition.condition_cta]==undefined||person.data.campaigns.ctas[condition.condition_cta].stats==undefined||person.data.campaigns.ctas[condition.condition_cta].stats.Completion==undefined)result=!0;condition.value=condition.condition_cta}if("If person is in visitor segment"==condition.condition_type){if(condition.data.conditions_group_id)var conditions_group=app.website.conditions_groups[condition.data.conditions_group_id];if(conditions_group&&conditions_group.conditions&&1==app.campaigns.checkConditions(conditions_group.conditions))result=!0;condition.value=conditions_group?conditions_group.name:condition.data.conditions_group_id}if("If person is NOT in visitor segment"==condition.condition_type){if(condition.data.conditions_group_id)conditions_group=app.website.conditions_groups[condition.data.conditions_group_id];if(!conditions_group||!conditions_group.conditions||0==app.campaigns.checkConditions(conditions_group.conditions))result=!0;condition.value=conditions_group?conditions_group.name:condition.data.conditions_group_id}if("If person is an identified contact"==condition.condition_type&&person.email)result=!0;if("If person is NOT an identified contact"==condition.condition_type&&!person.email)result=!0;if("If device type is"==condition.condition_type){if("desktop"==condition.data.device){if(1024<$cf(window).width())result=!0}else if((-1<condition.data.device.indexOf("mobile")||-1<condition.data.device.indexOf("tablet"))&&$cf(window).width()<1025)result=!0;condition.value=condition.data.device}if("If contact has tag"==condition.condition_type||"If person has tag"==condition.condition_type){if(person.data.tags!==undefined&&0<$cf.grep(person.data.tags,function(s){return s==condition.tag_id}).length)result=!0;condition.value=condition.tag_id}if("If contact does NOT have tag"==condition.condition_type||"If person does NOT have tag"==condition.condition_type){if(person.data.tags==undefined||0==$cf.grep(person.data.tags,function(s){return s==condition.tag_id}).length)result=!0;condition.value=condition.tag_id}if("If person has visited"==condition.condition_type){if(condition_url&&person.data.visits&&person.data.visits[condition_url])result=!0;condition.value=condition_url}if("If person has NOT visited"==condition.condition_type){if(!condition_url||!person.data.visits||!person.data.visits[condition_url])result=!0;condition.value=condition_url}if("If person has more than X page views"==condition.condition_type){if(person.data.visits!==undefined&&person.data.visits.pages!==undefined&&person.data.visits.pages>condition.count)result=!0;condition.value=condition.count}if("If person has less than X page views"==condition.condition_type){if(person.data.visits==undefined||person.data.visits.pages==undefined||person.data.visits.pages<condition.count)result=!0;condition.value=condition.count}if("If person has more than X sessions"==condition.condition_type){if(person.data.visits!==undefined&&person.data.visits.session!==undefined&&person.data.visits.session.sessions!==undefined&&person.data.visits.session.sessions>condition.count)result=!0;condition.value=condition.count}if("If person has fewer than X sessions"==condition.condition_type){if(person.data.visits==undefined||person.data.visits.session==undefined||person.data.visits.session.sessions==undefined||person.data.visits.session.sessions<condition.count)result=!0;condition.value=condition.count}if("If person has more than X page views in current session"==condition.condition_type){if(person.data.visits!==undefined&&person.data.visits.session!==undefined&&person.data.visits.session.pages!==undefined&&person.data.visits.session.pages>condition.count)result=!0;condition.value=condition.count}if("If person has fewer than X page views in current session"==condition.condition_type){if(person.data.visits==undefined||person.data.visits.session==undefined||person.data.visits.session.pages==undefined||person.data.visits.session.pages<condition.count)result=!0;condition.value=condition.count}if("If person had session within last X days"==condition.condition_type){if(person.data.visits!==undefined&&person.data.visits.session!==undefined&&person.data.visits.session.previous!==undefined&&app.helpers.parseDate(person.data.visits.session.previous)>=Date.parse(new Date)-24*condition.count*60*60*1e3)result=!0;condition.value=condition.count}if("If person has NOT had session within last X days"==condition.condition_type){if(person.data.visits==undefined||person.data.visits.session==undefined||person.data.visits.session.previous==undefined||app.helpers.parseDate(person.data.visits.session.previous)<=Date.parse(new Date)-24*condition.count*60*60*1e3)result=!0;condition.value=condition.count}if("If current session is more than X minutes"==condition.condition_type){if(person.data.visits!==undefined&&person.data.visits.session!==undefined&&person.data.visits.session.current!==undefined&&app.helpers.parseDate(person.data.visits.session.current)<=Date.parse(new Date)-60*condition.count*1e3)result=!0;condition.value=condition.count}if("If current session is less than X minutes"==condition.condition_type){if(person.data.visits==undefined||person.data.visits.session==undefined||person.data.visits.session.current==undefined||app.helpers.parseDate(person.data.visits.session.current)>=Date.parse(new Date)-60*condition.count*1e3)result=!0;condition.value=condition.count}if("If cookie value contains keyword"==condition.condition_type){if(app.helpers.getCookie(condition.url)&&condition.keyword&&-1<app.helpers.getCookie(condition.url).indexOf(condition.keyword))result=!0;condition.value=condition.url+" ? "+condition.keyword}if("If cookie value does NOT contain keyword"==condition.condition_type){if(!app.helpers.getCookie(condition.url)||!condition.keyword||-1==app.helpers.getCookie(condition.url).indexOf(condition.keyword))result=!0;condition.value=condition.url+" ? "+condition.keyword}if("If global variable value contains keyword"==condition.condition_type){if(condition.url&&condition.keyword&&-1<(app.helpers.nestedGet(window,condition.url,"")+"").indexOf(condition.keyword))result=!0;condition.value=condition.url+" ? "+condition.keyword}if("If global variable value does NOT contain keyword"==condition.condition_type){if(!condition.url||!condition.keyword||!app.helpers.nestedGet(window,condition.url)||-1==(app.helpers.nestedGet(window,condition.url,"")+"").indexOf(condition.keyword))result=!0;condition.value=condition.url+" ? "+condition.keyword}if("If person has visited with URL parameter"==condition.condition_type){if(person.data.params!==undefined&&(person.data.params[condition.url]==condition.keyword||-1<fullurl.indexOf(condition.url+"="+condition.keyword)))result=!0;condition.value="'"+condition.url+"' = '"+condition.keyword+"'"}if("If person has NOT visited with URL parameter"==condition.condition_type){if(person.data.params==undefined||person.data.params[condition.url]!==condition.keyword&&-1==fullurl.indexOf(condition.url+"="+condition.keyword))result=!0;condition.value="'"+condition.url+"' = '"+condition.keyword+"'"}if("If referral source contains"==condition.condition_type){if(person.data.sources!==undefined&&0<$cf.grep(person.data.sources,function(s){return s!==undefined&&null!==s&&-1<s.indexOf(condition.keyword)}).length)result=!0;condition.value=condition.keyword}if("If referral source does NOT contain"==condition.condition_type){if(person.data.sources==undefined||0==$cf.grep(person.data.sources,function(s){return s!==undefined&&null!==s&&-1<s.indexOf(condition.keyword)}).length)result=!0;condition.value=condition.keyword}if("If contact field value contains"==condition.condition_type){if(person[condition.data.attribute]&&-1<person[condition.data.attribute].indexOf(condition.keyword))result=!0;condition.value=condition.data.attribute+" ? "+condition.keyword}if("If contact field value does NOT contain"==condition.condition_type){if(!person[condition.data.attribute]||-1==person[condition.data.attribute].indexOf(condition.keyword))result=!0;condition.value=condition.data.attribute+" ? "+condition.keyword}if("If custom field value contains"==condition.condition_type){if(person.extra!==undefined&&null!==person.extra&&person.extra[condition.data.slug]!==undefined&&-1<person.extra[condition.data.slug].indexOf(condition.keyword))result=!0;condition.value=condition.data.slug+" ? "+condition.keyword}if("If custom field value does NOT contain"==condition.condition_type){if(person.extra==undefined||person.extra[condition.data.slug]==undefined||-1==person.extra[condition.data.slug].indexOf(condition.keyword))result=!0;condition.value=condition.data.slug+" ? "+condition.keyword}if(-1<condition.condition_type.indexOf("If person has tag in")){if(person.data[service]!==undefined&&person.data[service].tags!==undefined&&0<$cf.grep(person.data[service].tags,function(s){return s.id==condition.data.tag_id.replace("&#39;","'").toString()}).length)result=!0;condition.value=condition.data.tag_id.toString()}if(-1<condition.condition_type.indexOf("If person doesn't have tag in")){if(person.data[service]==undefined||person.data[service].tags==undefined||0==$cf.grep(person.data[service].tags,function(s){return s.id==condition.data.tag_id.replace("&#39;","'").toString()}).length)result=!0;condition.value=condition.data.tag_id.toString()}if(-1<condition.condition_type.indexOf("If person is subscribed to list in")||-1<condition.condition_type.indexOf("If person is subscribed to campaign in")){if(person.data[service]!==undefined&&person.data[service].lists!==undefined&&0<$cf.grep(person.data[service].lists,function(s){return s.id==condition.data.list_id.toString()}).length)result=!0;condition.value=condition.data.list_id.toString()}if(-1<condition.condition_type.indexOf("If person is NOT subscribed to list in")||-1<condition.condition_type.indexOf("If person is NOT subscribed to campaign in")){if(person.data[service]==undefined||person.data[service].lists==undefined||0==$cf.grep(person.data[service].lists,function(s){return s.id==condition.data.list_id.toString()}).length)result=!0;condition.value=condition.data.list_id.toString()}if(-1<condition.condition_type.indexOf("If person is in group in")){var group_id=condition.data.group_id||condition.data.tag_id;if(person.data[service]!==undefined&&person.data[service].groups!==undefined&&0<$cf.grep(person.data[service].groups,function(s){return s.id==group_id.replace("&#39;","'").toString()}).length)result=!0;condition.value=group_id.toString()}if(-1<condition.condition_type.indexOf("If person is NOT in group in")){group_id=condition.data.group_id||condition.data.tag_id;if(person.data[service]==undefined||person.data[service].groups==undefined||0==$cf.grep(person.data[service].groups,function(s){return s.id==group_id.replace("&#39;","'").toString()}).length)result=!0;condition.value=group_id.toString()}if(-1<condition.condition_type.indexOf("If person is a member of segment")){if(person.data[service]!==undefined&&person.data[service].segments!==undefined&&0<$cf.grep(person.data[service].segments,function(s){return s.id==condition.data.segment_id.toString()}).length)result=!0;condition.value=condition.data.segment_id.toString()}if(-1<condition.condition_type.indexOf("If person is NOT a member of segment")){if(person.data[service]==undefined||person.data[service].segments==undefined||0==$cf.grep(person.data[service].segments,function(s){return s.id==condition.data.segment_id.toString()}).length)result=!0;condition.value=condition.data.segment_id.toString()}if(-1<condition.condition_type.indexOf("If person is in workflow in")){if(person.data[service]!==undefined&&person.data[service].workflows!==undefined&&0<$cf.grep(person.data[service].workflows,function(s){return s.id==condition.data.workflow.toString()}).length)result=!0;condition.value=condition.data.workflow.toString()}if(-1<condition.condition_type.indexOf(
"If person is NOT in workflow in")){if(person.data[service]==undefined||person.data[service].workflows==undefined||0==$cf.grep(person.data[service].workflows,function(s){return s.id==condition.data.workflow.toString()}).length)result=!0;condition.value=condition.data.workflow.toString()}if(-1<condition.condition_type.indexOf("If person is in lifecycle stage in")){if(person.data[service]!==undefined&&person.data[service].properties==undefined&&0<$cf.grep(person.data[service].properties,function(p){return"lifecyclestage"==p.property&&p.value==condition.data.lifecycle_stage.toString()}).length)result=!0;condition.value=condition.data.lifecycle_stage.toString()}if(-1<condition.condition_type.indexOf("If person is NOT in lifecycle stage in")){if(person.data[service]==undefined||person.data[service].properties==undefined||0==$cf.grep(person.data[service].properties,function(p){return"lifecyclestage"==p.property&&p.value==condition.data.lifecycle_stage.toString()}).length)result=!0;condition.value=condition.data.lifecycle_stage.toString()}if(-1<condition.condition_type.indexOf("If person has submitted form in")){if(person.data[service]!==undefined&&person.data[service].forms!==undefined&&0<$cf.grep(person.data[service].forms,function(f){return f.name==condition.data.form.toString()}).length)result=!0;condition.value=condition.data.form.toString()}if(-1<condition.condition_type.indexOf("If person did NOT submit form in")){if(person.data[service]==undefined||person.data[service].forms==undefined||0==$cf.grep(person.data[service].forms,function(f){return f.name==condition.data.form.toString()}).length)result=!0;condition.value=condition.data.form.toString()}if(-1<condition.condition_type.indexOf("If contact property value matches in")||-1<condition.condition_type.indexOf("If person has custom field value in")){if(person.data[service]!==undefined&&person.data[service].properties!==undefined&&0<$cf.grep(person.data[service].properties,function(p){return p.property==condition.data.property_type&&p.value==condition.data.property}).length)result=!0;condition.value=condition.data.property_type+" = "+condition.data.property}if(-1<condition.condition_type.indexOf("If contact property value does NOT match in")||-1<condition.condition_type.indexOf("If person doesn't have custom field value in")){if(person.data[service]==undefined||person.data[service].properties==undefined||0==$cf.grep(person.data[service].properties,function(p){return p.property==condition.data.property_type&&p.value==condition.data.property}).length)result=!0;condition.value=condition.data.property_type+" != "+condition.data.property}if(-1<condition.condition_type.indexOf("If contact property value contains in")){if(person.data[service]!==undefined&&person.data[service].properties!==undefined&&0<$cf.grep(person.data[service].properties,function(p){return p.property==condition.data.property_type&&-1<p.value.indexOf(condition.data.property)}).length)result=!0;condition.value=condition.data.property_type+" ? "+condition.data.property}if(-1<condition.condition_type.indexOf("If contact property value does NOT contain in")){if(person.data[service]==undefined||person.data[service].properties==undefined||0==$cf.grep(person.data[service].properties,function(p){return p.property==condition.data.property_type&&-1<p.value.indexOf(condition.data.property)}).length)result=!0;condition.value=condition.data.property_type+" ? "+condition.data.property}if(-1<condition.condition_type.indexOf("If person has field value in")){if(person.data[service]!==undefined&&person.data[service].properties!==undefined&&0<$cf.grep(person.data[service].properties,function(p){return p.id==condition.data.property_type&&p.value==condition.data.property}).length)result=!0;condition.value=condition.data.property_type+" = "+condition.data.property}if(-1<condition.condition_type.indexOf("If person doesn't have field value in")){if(person.data[service]==undefined||person.data[service].properties==undefined||0==$cf.grep(person.data[service].properties,function(p){return p.id==condition.data.property_type&&p.value==condition.data.property}).length)result=!0;condition.value=condition.data.property_type+" != "+condition.data.property}if(-1<condition.condition_type.indexOf("If custom field contains value in")){if(person.data[service]!==undefined&&person.data[service].properties!==undefined&&0<$cf.grep(person.data[service].properties,function(p){return p.id==condition.data.property_type&&-1<p.value.indexOf(condition.data.property)}).length)result=!0;condition.value=condition.data.property_type+" ? "+condition.data.property}if(-1<condition.condition_type.indexOf("If custom field does NOT contain value in")){if(person.data[service]==undefined||person.data[service].properties==undefined||0==$cf.grep(person.data[service].properties,function(p){return p.id==condition.data.property_type&&-1<p.value.indexOf(condition.data.property)}).length)result=!0;condition.value=condition.data.property_type+" ? "+condition.data.property}if("If visiting WordPress page"==condition.condition_type){if($cf("body").hasClass("page")&&("All"==condition.data.page_id||$cf("body").hasClass("page-id-"+condition.data.page_id)))result=!0;condition.value=condition.data.page_id}if("If NOT visiting WordPress page"==condition.condition_type){if(0==$cf("body").hasClass("page")||"All"!==condition.data.page_id&&0==$cf("body").hasClass("page-id-"+condition.data.page_id))result=!0;condition.value=condition.data.page_id}if("If visiting WordPress post"==condition.condition_type){if($cf("body").hasClass("single-post")&&("All"==condition.data.post_id||$cf("body").hasClass("postid-"+condition.data.post_id)))result=!0;condition.value=condition.data.post_id}if("If NOT visiting WordPress post"==condition.condition_type){if(0==$cf("body").hasClass("single-post")||"All"!==condition.data.post_id&&0==$cf("body").hasClass("postid-"+condition.data.post_id))result=!0;condition.value=condition.data.post_id}if("If visiting WordPress category"==condition.condition_type){if($cf("body").hasClass("category-"+condition.data.category_id)||$cf("body").hasClass("single-post")&&$cf("article.post").first().hasClass("category-"+condition.data.category_id))result=!0;condition.value=condition.data.category_id}if("If NOT visiting WordPress category"==condition.condition_type){if(0==$cf("body").hasClass("category-"+condition.data.category_id)&&0==($cf("body").hasClass("single-post")&&$cf("article.post").first().hasClass("category-"+condition.data.category_id)))result=!0;condition.value=condition.data.category_id}if("If WordPress post has tag"==condition.condition_type){if($cf("body").hasClass("tag-"+condition.data.tag_id)||$cf("body").hasClass("single-post")&&$cf("article.post").hasClass("tag-"+condition.data.tag_id))result=!0;condition.value=condition.data.tag_id}if("If WordPress post does NOT have tag"==condition.condition_type){if(0==$cf("body").hasClass("tag-"+condition.data.tag_id)&&0==($cf("body").hasClass("single-post")&&$cf("article.post").hasClass("tag-"+condition.data.tag_id)))result=!0;condition.value=condition.data.tag_id}if("If person is logged into WordPress"==condition.condition_type&&$cf("body").hasClass("logged-in"))result=!0;if("If person is NOT logged into WordPress"==condition.condition_type&&0==$cf("body").hasClass("logged-in"))result=!0;if(-1<condition.condition_type.indexOf("If CTA custom field contains")||-1<condition.condition_type.indexOf("If CTA survey selection matches")||-1<condition.condition_type.indexOf("If form custom field contains")||-1<condition.condition_type.indexOf("If survey selection matches")){if(person.extra!==undefined&&null!==condition.data&&condition.data.slug!==undefined&&null!==condition.keyword&&person.extra[condition.data.slug]!==undefined&&-1<person.extra[condition.data.slug].indexOf(condition.keyword))result=!0;null!==condition.data&&(condition.value=condition.data.slug+" ? "+condition.keyword)}if(-1<condition.condition_type.indexOf("If CTA custom field does NOT contain")||-1<condition.condition_type.indexOf("If CTA survey selection does NOT match")||-1<condition.condition_type.indexOf("If form custom field does NOT contain")||-1<condition.condition_type.indexOf("If survey selection does NOT match")){if(person.extra==undefined||condition.data==undefined||condition.data.slug==undefined||condition.keyword==undefined||person.extra[condition.data.slug]==undefined||-1==person.extra[condition.data.slug].indexOf(condition.keyword))result=!0;null!==condition.data&&(condition.value=condition.data.slug+" ? "+condition.keyword)}if("If current step has been completed"==condition.condition_type&&person.data!==undefined&&person.data.campaigns!==undefined&&person.data.campaigns.ctas!==undefined&&person.data.campaigns.ctas!==undefined&&person.data.campaigns.ctas[condition.data.cta_id]!==undefined&&person.data.campaigns.ctas[condition.data.cta_id].variants!==undefined&&person.data.campaigns.ctas[condition.data.cta_id].variants[condition.data.variant_id]!==undefined&&person.data.campaigns.ctas[condition.data.cta_id].variants[condition.data.variant_id].steps!==undefined&&person.data.campaigns.ctas[condition.data.cta_id].variants[condition.data.variant_id].steps[condition.data.step_id]!==undefined&&person.data.campaigns.ctas[condition.data.cta_id].variants[condition.data.variant_id].steps[condition.data.step_id].stats!==undefined&&person.data.campaigns.ctas[condition.data.cta_id].variants[condition.data.variant_id].steps[condition.data.step_id].stats.Complete!==undefined)result=!0;if(-1<condition.condition_type.indexOf("in Segment")){if(window.analytics&&"function"==typeof analytics.user&&analytics.user()&&analytics.user().traits())var ajs_traits=analytics.user().traits();if(person.data.segment&&person.data.segment&&person.data.segment.properties)var personas_traits=person.data.segment.properties;if("If trait matches in Segment"==condition.condition_type){if(ajs_traits&&"object"==typeof ajs_traits&&ajs_traits[condition.data.trait].toString()==condition.data.value||personas_traits&&0<$cf.grep(personas_traits,function(p){return p.id==condition.data.trait&&p.value.toString()==condition.data.value}).length)result=!0;condition.value=condition.data.trait+" ? "+condition.data.value}if("If trait does NOT match in Segment"==condition.condition_type){if(!(ajs_traits&&"object"==typeof ajs_traits&&ajs_traits[condition.data.trait].toString()===condition.data.value||personas_traits&&0!=$cf.grep(personas_traits,function(p){return p.id==condition.data.trait&&p.value.toString()==condition.data.value}).length))result=!0;condition.value=condition.data.trait+" ? "+condition.data.value}if("If trait contains keyword in Segment"==condition.condition_type){if(ajs_traits&&"object"==typeof ajs_traits&&ajs_traits[condition.data.trait]&&-1<ajs_traits[condition.data.trait].toString().indexOf(condition.data.value))result=!0;if(!0!==result&&personas_traits&&0<$cf.grep(personas_traits,function(p){return p.id==condition.data.trait&&-1<p.value.toString().indexOf(condition.data.value)}).length)result=!0;condition.value=condition.data.trait+" ? "+condition.data.value}if("If trait does NOT contain keyword in Segment"==condition.condition_type){if(!ajs_traits||"object"!=typeof ajs_traits||!ajs_traits[condition.data.trait]||-1==ajs_traits[condition.data.trait].toString().indexOf(condition.data.value)){result=!0;if(personas_traits&&0!=$cf.grep(personas_traits,function(p){return p.id==condition.data.trait&&-1<p.value.toString().indexOf(condition.data.value)}).length)result=!1;else var result=!0}condition.value=condition.data.trait+" ? "+condition.data.value}if("If trait integer is greater than in Segment"==condition.condition_type){if(ajs_traits&&"object"==typeof ajs_traits&&ajs_traits[condition.data.trait]&&"number"==typeof ajs_traits[condition.data.trait]&&ajs_traits[condition.data.trait]>parseInt(condition.data.value)||personas_traits&&0<$cf.grep(personas_traits,function(p){return p.id==condition.data.trait&&"number"==typeof p.value&&parseInt(p.value)>condition.data.value}).length)result=!0;condition.value=condition.data.trait+" ? "+condition.data.value}if("If trait integer is less than in Segment"==condition.condition_type){if(ajs_traits&&"object"==typeof ajs_traits&&ajs_traits[condition.data.trait]&&"number"==typeof ajs_traits[condition.data.trait]&&ajs_traits[condition.data.trait]<parseInt(condition.data.value)||personas_traits&&0<$cf.grep(personas_traits,function(p){return p.id==condition.data.trait&&"number"==typeof p.value&&parseInt(p.value)<condition.data.value}).length)result=!0;condition.value=condition.data.trait+" ? "+condition.data.value}}condition[operator]=result,description[operator]=result,results.push(description)}}),!0!==$cf.isEmptyObject(conditions)&&(0==$cf.grep(results,function(s){return s.and!==undefined}).length||0==$cf.grep(results,function(s){return 0==s.and}).length)&&0==$cf.grep(results,function(s){return s.or!==undefined}).length||(0==$cf.grep(results,function(s){return s.and!==undefined}).length||0==$cf.grep(results,function(s){return 0==s.and}).length)&&0<$cf.grep(results,function(s){return 1==s.or}).length)outcome=!0;return outcome},app.campaigns.runVisitGoals=function(event){return $cf.each(app.website.flows,function(flow_id,flow){$cf.each(flow.stages,function(stage_id,stage){var current_status=$cf.grep(convertflow.person.data.flows||[],function(f){return f.id==flow_id})[0];(1==stage.position&&(!current_status||1==current_status.position)||current_status&&current_status.position==stage.position)&&$cf.each(stage.goals,function(goal_id,goal){"visit"==goal.goal_type&&1==goal.live&&!0!==goal.status&&1==app.campaigns.checkConditions(goal.conditions,convertflow.person)&&(goal.status=!0,event.goal_id||(event.goal_id=goal.id),event.stage_id||(event.stage_id=stage.id),event.flow_id||(event.flow_id=flow.id),$cf.map(app.website.actions,function(action){if("Goal"==action.contactable_type&&action.contactable_id==goal.id)return action}).forEach(function(action){app.actions.run(action)}))})})}),event},app.ctas.locallystored=function(){if(app.localstorage){if((locallystored=localStorage.getItem("cf_ctas"))==undefined||"undefined"==locallystored||null==locallystored){localStorage.setItem("cf_ctas",JSON.stringify({}));var data={}}else{var locallystored=JSON.parse(locallystored);data={};-1<location.search.indexOf("cfTime=true")&&console.log(locallystored),$cf.each(locallystored,function(cta_id,last_updated){return-1<location.search.indexOf("cfTime=true")&&(console.log(app.website.ctas[parseInt(cta_id)]),console.log(app.website.ctas[parseInt(cta_id)]==undefined||app.website.ctas[parseInt(cta_id)].options.published_at==undefined||last_updated<app.helpers.parseDate(app.website.ctas[parseInt(cta_id)].options.published_at)||last_updated<=Date.parse(new Date)-6048e5)),app.website.ctas[parseInt(cta_id)]==undefined||app.website.ctas[parseInt(cta_id)].options.published_at==undefined||last_updated<app.helpers.parseDate(app.website.ctas[parseInt(cta_id)].options.published_at)||last_updated<=Date.parse(new Date)-6048e5?localStorage.removeItem("cta"+cta_id):data[cta_id]=last_updated,data}),localStorage.setItem("cf_ctas",JSON.stringify(data))}return data}return{}},app.ctas.load=function(cta_id,campaign,snippet,callback){var can_load_campaign=campaign&&("broadcast"==campaign.campaign_type&&app.website.ctas[cta_id].broadcast_id==campaign.id||"goal"==campaign.campaign_type&&app.website.ctas[cta_id].broadcast_id==undefined&&app.website.ctas[cta_id].goal_id==campaign.id||app.website.ctas[cta_id].broadcast_id==undefined&&app.website.ctas[cta_id].goal_id==undefined),can_load_if_landing_page=campaign&&(0==$cf("body").hasClass("convertflow-page")||snippet||0<$cf.map(campaign.conditions,function(condition){if("If visiting ConvertFlow landing page"==condition.condition_type&&(!condition.condition_cta||condition.condition_cta==$cf(".convertflow-cta.cf-page").parent().attr("cta-id")))return condition}).length);if(campaign==undefined||can_load_campaign&&can_load_if_landing_page){var cta_path=app.assets_root+"cta/"+cta_id+".js";if(0==app.live)cta_path=cta_path+"?preview=true";var local=app.helpers.decompressAndGet("cta"+cta_id);if(null!==local&&"undefined"!==local)var cta=JSON.parse(local);else cta=null;var selectors=[],conditions=undefined;if(campaign!==undefined)conditions=$cf.map(campaign.conditions,function(condition){if(condition.cta_id==cta_id&&"If area is"==condition.condition_type&&null!==condition.area_id)return condition});if(conditions!==undefined&&$cf.each(conditions,function(index,condition){var area_selector="cf-"+app.website.id+"-area-"+condition.area_id;selectors.push("."+area_selector+" , #"+area_selector)}),snippet!==undefined){cta_id=$cf(snippet).attr("cta-id")||$cf(snippet).attr("data-cta-id");($cf(snippet).attr("website-id")||$cf(snippet).attr("data-website-id"))==app.website.id&&selectors.push(snippet)}campaign!==undefined&&("broadcast"==campaign.campaign_type&&0==campaign.quick||"goal"==campaign.campaign_type)&&(app.website.ctas[cta_id][campaign.campaign_type+"_id"]=campaign.id);var startInject=function(callback){campaign!==undefined&&"broadcast"==campaign.campaign_type&&0==campaign.quick&&(convertflow.ctas[cta_id].broadcast_id=campaign.id),campaign!==undefined&&"goal"==campaign.campaign_type&&(convertflow.ctas[cta_id].goal_id=campaign.id,convertflow.ctas[cta_id].stage_id=campaign.stage_id,convertflow.ctas[cta_id].flow_id=campaign.flow_id);var cta=convertflow.ctas[cta_id];cta!==undefined&&app.ctas.inject(cta,campaign,selectors,callback)};null==cta||app.website.ctas[cta_id]!==undefined&&app.helpers.parseDate(cta.options.published_at)<app.helpers.parseDate(app.website.ctas[cta_id].options.published_at)?app.helpers.cachedScript(cta_path).done(function(){var cta=convertflow.ctas[cta_id];if(1==app.live&&"inline"==cta.cta_type){var locallystored=app.ctas.locallystored();app.helpers.compressAndStore("cta"+cta_id,JSON.stringify(cta)),locallystored[cta_id]=Date.parse(new Date),app.localstorage&&localStorage.setItem("cf_ctas",JSON.stringify(locallystored))}startInject(callback)}):(convertflow.ctas[cta_id]=cta,startInject(callback))}$cf("body").hasClass("convertflow-page")&&campaign&&0==can_load_if_landing_page&&(campaign.status=!1)},app.ctas.inject=function(cta,campaign,selectors,callback){if(0<$cf("body").length){var variant=app.ctas.test(cta);if(variant)if("inline"!==cta.cta_type&&"page"!==cta.cta_type&&1==app.live){if(0==$cf("#cta"+cta.id).length){if("click"!==variant.options.trigger_type&&campaign!==undefined&&"broadcast"==campaign.campaign_type){var supression=cta.cta_type+"Triggered";convertflow[supression]==undefined&&(convertflow[supression]=campaign.id,"prehook"==variant.options.trigger_type&&(convertflow.hookTriggered=campaign.id))}var div=document.createElement("div");$cf(div).attr("id","cta"+cta.id).css("display","none");var classname="convertflow-cta";if(app.website.ctas[cta.id]!==undefined)classname=classname+" cf-"+app.website.ctas[cta.id].cta_type;div.className=classname,div.innerHTML=variant.html,$cf(document.body).append(div),app.ctas.initialize(cta,variant,$cf("#cta"+cta.id),callback)}}else $cf(selectors).each(function(index,selector){var isArea="string"==typeof selector&&-1<selector.indexOf("area");if(1==isArea)var area_id=selector.split("-").pop();else area_id=undefined;var checkForEmbed=function(selector){0<$cf(selector).length?$cf(selector).each(function(){if(0==$cf(this).find(".convertflow-cta").length&&(1==isArea&&area_id!==undefined&&convertflow.areas[area_id]==cta.id||0==isArea)){$cf(this).attr("broadcast-id",convertflow.ctas[cta.id].broadcast_id),1==app.timed&&console.timeEnd("CTA inject");var div=document.createElement("div");$cf(div).addClass("cta"+cta.id).css("display","block");var classname="convertflow-cta";if(app.website.ctas[cta.id]!==undefined)classname=classname+" cf-"+app.website.ctas[cta.id].cta_type;div.className=classname,div.innerHTML=variant.html,$cf(div).find('div[id="cta_'+cta.id+'"]').css({"margin-left":"auto","margin-right":"auto"}),$cf(div).attr("injected","true"),$cf(this).html(div),app.ctas.initialize(cta,variant,this,callback),"page"==cta.cta_type&&(app.ctas.findSnippets(),convertflow.person&&app.campaigns.initialize(app.website,!1))}}):"complete"!==document.readyState&&setTimeout(function(){checkForEmbed(selector)},10)};checkForEmbed(selector)})}else setTimeout(function(){app.ctas.inject(cta,campaign,selectors)},50)},app.ctas.findSnippets=function(){window.convertflow.snippetsLoaded=!0,0<$cf('.cf-cta-snippet[website-id="'+app.website.id+'"]').length||0<$cf('.cf-cta-snippet[data-website-id="'+app.website.id+'"]').length?$cf('.cf-cta-snippet[website-id="'+app.website.id+'"], .cf-cta-snippet[data-website-id="'+app.website.id+'"]').each(function(index,snippet){if(0==$cf(snippet).children().length){var campaign,cta_id=$cf(snippet).attr("cta-id")||$cf(snippet).attr("data-cta-id"),broadcast_id=$cf(snippet).attr("data-broadcast-id");broadcast_id&&(campaign=app.website.broadcasts[broadcast_id]),app.ctas.load(cta_id,campaign,snippet)}}):"complete"!==document.readyState&&setTimeout(function(){app.ctas.findSnippets()},50)},app.ctas.splitTest=function(variations,weights){var rand=function(min,max){return Math.floor(Math.random()*(max-min+1))+min},weighed_list=function(list,weight){for(var weighed_list=[],i=0;i<weight.length;i++)for(var multiples=100*weight[i],j=0;j<multiples;j++)weighed_list.push(list[i]);return weighed_list}(variations,weights);return weighed_list[rand(0,weighed_list.length-1)]},app.ctas.test=function(cta){if(1==app.live){var variants={},variations=[],weights=[];$cf.each(cta.variants,function(variant_id,variant){var weight=.01*variant.percentage;variants[variant_id]=weight,variations.push(variant_id),weights.push(weight)});var cookie=app.helpers.getCookie("cf_"+app.website.id+"_cta_"+cta.id);if("cookie"!==cta.test_type||null==cookie||variants[cookie]==undefined||0==variants[cookie]){var variant=app.ctas.splitTest(variations,weights);app.helpers.setCookie("cf_"+app.website.id+"_cta_"+cta.id,variant,10512e3)}else variant=app.helpers.getCookie("cf_"+app.website.id+"_cta_"+cta.id);return cta.variants[parseInt(variant)]}var variant_id=0;return cta.variants[parseInt(variant_id)]},app.ctas.mergeTags=function(embed){var personMap=app.helpers.personMap();$cf(embed).find("p, h1, h2, h3, h4, h5, h6, span").each(function(index,element){$cf.each($cf(element).html().match("((.*))"),function(index,match){if(null!=match){for(var txt=match.split("("),mergetags=[],i=1;i<txt.length;i++)mergetags.push(txt[i].split(")")[0]);if($cf.each(personMap,function(dataname,property){if(-1!==match.indexOf(property)){var person_tags=mergetags.filter(function(mergetag){return-1<mergetag.indexOf("person."+property)&&-1==mergetag.indexOf(".fields.")});$cf.each(person_tags,function(index,mergetag){mergetag="("+mergetag+")";if(convertflow.person!==undefined&&convertflow.person[dataname]!==undefined&&null!==convertflow.person[dataname]&&0<convertflow.person[dataname].length||""!==app.helpers.getParameterByName(property))""==app.helpers.getParameterByName(property)?$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'">'+convertflow.person[dataname]+"</span>")):$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'">'+app.helpers.getParameterByName(property)+"</span>"));else if(-1<mergetag.indexOf("fallback")){var fallback=mergetag.slice(mergetag.indexOf("fallback=")+"fallback=".length).replace(/\}/g,"").replace(/\)/g,"");$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'">'+fallback+"</span>"))}else-1==mergetag.indexOf("fallback")&&$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'"></span>'))})}}),-1!==match.indexOf(".fields.")){var field_tags=mergetags.filter(function(mergetag){return-1<mergetag.indexOf("person.fields.")});$cf.each(field_tags,function(index,mergetag){if(-1<(mergetag="("+mergetag+")").indexOf(" OR "))var dataname=mergetag.substring(16,mergetag.lastIndexOf(" OR ")).replace(/\}/g,"").replace(/\)/g,"");else dataname=mergetag.substring(16,mergetag.lastIndexOf("})")).replace(/\}/g,"").replace(/\)/g,"");if(convertflow.person!==undefined&&convertflow.person.extra!==undefined&&null!==convertflow.person.extra&&convertflow.person.extra[dataname]!==undefined&&null!==convertflow.person.extra[dataname]&&0<convertflow.person.extra[dataname].length||""!==app.helpers.getParameterByName(dataname))""==app.helpers.getParameterByName(dataname)?$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'">'+convertflow.person.extra[dataname]+"</span>")):$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'">'+app.helpers.getParameterByName(dataname)+"</span>"));else if(-1<mergetag.indexOf("fallback")){var fallback=mergetag.slice(mergetag.indexOf("fallback=")+"fallback=".length).replace(/\}/g,"").replace(/\)/g,"");$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'">'+fallback+"</span>"))}else-1==mergetag.indexOf("fallback")&&$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'"></span>'))})}if(-1!==match.indexOf("parameter=")){var param_tags=mergetags.filter(function(mergetag){return-1<mergetag.indexOf("parameter=")});$cf.each(param_tags,function(index,mergetag){if(-1<(mergetag="("+mergetag+")").indexOf(" OR "))var parameter=mergetag.substring(12,mergetag.lastIndexOf(" OR ")).replace(/\}/g,"").replace(/\)/g,"");else parameter=mergetag.substring(12,mergetag.lastIndexOf("})")).replace(/\}/g,"").replace(/\)/g,"");if(""!==app.helpers.getParameterByName(parameter))$cf(element).html($cf(element).html().replace(mergetag,app.helpers.getParameterByName(parameter)));else if(-1<mergetag.indexOf("fallback")){var fallback=mergetag.slice(mergetag.indexOf("fallback=")+"fallback=".length).replace(/\}/g,"").replace(/\)/g,"");$cf(element).html($cf(element).html().replace(mergetag,fallback))}else-1==mergetag.indexOf("fallback")&&$cf(element).html($cf(element).html().replace(mergetag,""))})}var services=app.services;$cf.each(services,function(index,service){if(-1!==match.indexOf(service)){var service_tags=mergetags.filter(function(mergetag){return-1<mergetag.indexOf("person."+service+".")});$cf.each(service_tags,function(index,mergetag){if(-1<(mergetag="("+mergetag+")").indexOf(" OR "))var dataname=mergetag.substring(("person."+service+".").length+2,mergetag.lastIndexOf(" OR ")).replace(/\}/g,"").replace(/\)/g,"");else dataname=mergetag.substring(("person."+service+".").length+2,mergetag.lastIndexOf("})")).replace(/\}/g,"").replace(/\)/g,"");if(convertflow.person!==undefined&&convertflow.person.data[service]!==undefined&&convertflow.person.data[service].properties&&0!==$cf.grep(convertflow.person.data[service].properties,function(p){return(p.property==dataname||p.id==dataname||p.name==dataname)&&p.value}).length){var property=$cf.grep(convertflow.person.data[service].properties,function(p){return p.property==dataname||p.id==dataname||p.name==dataname})[0].value;$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'">'+property+"</span>"))}else if(-1<mergetag.indexOf("fallback")){var fallback=mergetag.slice(mergetag.indexOf("fallback=")+"fallback=".length).replace(/\}/g,"").replace(/\)/g,"");$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'">'+fallback+"</span>"))}else-1==mergetag.indexOf("fallback")&&$cf(element).html($cf(element).html().replace(mergetag,'<span data-merge="'+dataname+'"></span>'))})}})}})})},app.ctas.fonts=function(cta,variant){var checkAndLoadFonts=function(variant){var font_families=[];$cf.each(["Roboto","Montserrat","Lato","Open Sans","Oswald"],function(index,font_type){-1<variant.html.indexOf(font_type)&&window.WebFont[font_type]==undefined&&("Montserrat"==font_type?font_families.push("Montserrat:400,400italic,700,700italic"):"Lato"==font_type?font_families.push("Lato:400,400italic,700,700italic"):"Open Sans"==font_type?font_families.push("Open Sans:400,400italic,700,700italic"):"Oswald"==font_type?font_families.push("Oswald:400,700"):"Roboto"==font_type&&font_families.push("Roboto:400,400italic,700,700italic"),window.WebFont[font_type]=!0)}),0<font_families.length&&WebFont.load({google:{families:font_families}})};window.WebFont==undefined&&convertflow.fontsLoaded==undefined?(convertflow.fontsLoaded=!0,app.helpers.cachedScript("https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js").done(function(){checkAndLoadFonts(variant)})):window.WebFont!==undefined&&checkAndLoadFonts(variant)},app.ctas.profile=function(cta,variant,embed){var brand=app.website.brand,user_id=$cf(embed).find(".cf-profile-name").attr("user-id"),user=user_id!==undefined?app.website.profiles[parseInt(user_id)]:undefined;$cf(embed).find(".cf-profile-title").add(".cta"+cta.id+" .cf-profile-title").each(function(index,span){null!==brand&&0<brand.length&&$cf(span).text(brand)}),user!==undefined&&($cf(embed).find(".cf-profile-name").add(".cta"+cta.id+" .cf-profile-name").each(function(index,span){if(null!==user.name&&0<user.name.length){var name=user.name;if(null!==user.lastname&&0<user.lastname.length)name=name+" "+user.lastname;$cf(span).text(name)}}),$cf(embed).find(".cf-profile-img").add(".cta"+cta.id+" .cf-profile-img").each(function(index,div){var image=$cf(div).find("img");$cf(image).attr("src")!==user.avatar&&$cf(image).attr("src",user.avatar)}))},app.ctas.poweredby=function(){1==app.website.powered_by&&1==app.live&&$cf(".cf-powered-by").show()},app.ctas.consentMessages=function(cta,variant,embed){if(0<app.website.privacy_message.length&&$cf(embed).find(".cf-privacy-message").text(app.website.privacy_message),0<app.website.privacy_link.length){var privacy_link=app.website.privacy_link;if(-1==app.website.privacy_link.indexOf("http"))privacy_link="http://"+privacy_link;$cf(embed).find(".cf-privacy-link").attr("href",privacy_link)}if(0<app.website.privacy_link_text.length&&$cf(embed).find(".cf-privacy-link").html("<br>"+app.website.privacy_link_text),0<app.website.terms_link.length){var terms_link=app.website.terms_link;if(-1==app.website.terms_link.indexOf("http"))terms_link="http://"+terms_link;$cf(embed).find(".cf-terms-link").attr("href",terms_link)}0<app.website.terms_link_text.length&&$cf(embed).find(".cf-terms-link").html(app.website.terms_link_text),0<app.website.marketing_consent.length&&$cf(embed).find(".cf-marketing-label").html(app.website.marketing_consent)},app.ctas.initialize=function(cta,variant,embed,callback){if(app.ctas.style(cta,variant,embed),app.ctas.poweredby(cta,variant,embed),app.ctas.consentMessages(cta,variant,embed),app.helpers.libraries(),0==("inline"==cta.cta_type||"page"==cta.cta_type)&&(app.ctas.trigger(cta,variant,embed),app.ctas.closeOut(cta,variant,embed)),app.ctas.profile(cta,variant,embed),$cf(embed).find(".cf-section").each(function(index,section){$cf(section).attr("section-id");"overlay"!=cta.cta_type||"splash"!=cta.overlay_type||variant.options["splash-type"]!=undefined&&"full"!=variant.options["splash-type"]||$cf(section).find(".cf-column").css("min-height",$cf(window).height())}),app.ctas.mergeTags(embed),app.ctas.forms(cta,variant,embed),app.ctas.buttons(cta,variant,embed),app.ctas.surveys(cta,variant,embed),app.ctas.fonts(cta,variant,embed),"inline"==cta.cta_type||"page"==cta.cta_type){var step=$cf.map(variant.steps,function(step){if(1==step.position)return step})[0];1==app.live&&app.ctas.track({event_type:"View",variant_id:variant.id,step_id:step.id},cta),step.options&&step.options.script&&$cf("body").append(step.options.script),app.ctas.skipLogic(cta,variant,step,embed)}callback!==undefined&&callback()},app.ctas.resetCTAs=function(){var ctas=window.convertflow.ctas,html_style=$cf("html").attr("style");ctas&&$cf.each(Object.keys(ctas),function(index,cta_id){ctas[cta_id]&&(ctas[cta_id].fired=undefined,ctas[cta_id].clicktriggered=undefined)}),1==convertflow.barTriggered&&html_style&&-1<html_style.indexOf("padding-top")&&-1<html_style.indexOf("transition")&&$cf("html").css("transition","").css("padding-top",""),convertflow.hookTriggered=undefined,convertflow.overlayTriggered=undefined,convertflow.profileTriggered=undefined,convertflow.barTriggered=undefined,convertflow.snippetsLoaded=undefined,convertflow.areas={},$cf(".convertflow-cta, .cf-prehook-popup").remove()},app.ctas.style=function(cta,variant,embed){var embed_css={width:"100%"};if("inline"==cta.cta_type&&("center"!=variant.options["cta-position"]&&(variant.options["cta-position"]!=undefined||"sidebar"!=cta.inline_type&&"bumper"!=cta.inline_type)||(embed_css["margin-left"]="auto",embed_css["margin-right"]="auto"),"left"==variant.options["cta-position"]&&(embed_css["margin-right"]="auto"),
"right"==variant.options["cta-position"]&&(embed_css["margin-left"]="auto"),"embed"==cta.inline_type?embed_css["max-width"]=variant.options["container-width"]:("sidebar"==cta.inline_type&&(embed_css["max-width"]="310px"),"bumper"==cta.inline_type&&(embed_css["max-width"]="900px"))),"inline"!==cta.cta_type){var popup_css={},trigger=$cf(embed).find('div[id="cta_'+cta.id+'"]');$cf(trigger).addClass("cf-has-transitions cf-is-hidden");var trigger_css={};if("overlay"==cta.cta_type)var container=embed;else container=trigger;if("page"!==cta.cta_type){$cf(container).prepend('<div data-cta="'+cta.id+'" class="cf-cta-close">x</div>');var close=$cf(embed).find(".cf-cta-close"),close_css={}}var powered_by=$cf('<div class="cf-powered-by" style="display: none; bottom: 0; padding: 7px; padding-top: 5px; width: 100%; text-align: center; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; height: 30px; line-height: 22px !important;"><a rel="nofollow" href="'+app.powered_by_link+'" target="_blank" style="cursor: pointer; font-family: Helvetica Neue, Helvetica, Arial, San-serif !important; letter-spacing: 0.5px !important; font-smoothing: antialiased !important; -moz-osx-font-smoothing: auto !important; -webkit-font-smoothing: antialiased !important;"><div class="cf-powered-by-inner" style="display: block !important; margin-left: auto !important; margin-right: auto !important; max-width: 143px !important; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; font-family: inherit !important; color: inherit !important;"><span style="float: left; font-size: 11px; font-family: inherit !important; color: inherit !important; letter-spacing: inherit !important;">Crafted in</span><img style="width: 11px !important; transition: all 0.2s ease !important; left: 0 !important; right: 0 !important; float: left !important; margin-left: 4px !important; margin-right: auto !important; margin-top: 6px !important;" /><span style="float: right; font-size: 11px; font-family: inherit !important; color: inherit !important; letter-spacing: inherit !important;">ConvertFlow</span></div></a></div>');if(-1<(link=$cf(powered_by).find("a").attr("href")).indexOf("https://www.convertflow.com/"))var link=link.replace("https://www.convertflow.com/","");if(-1<link.indexOf("https://app.convertflow.com/refer"))link=link.replace("https://app.convertflow.com/refer","");if(-1<link.indexOf("utm_campaign=default"))link=link.replace("default",cta.cta_type);if("page"==cta.cta_type)link="/landing-pages"+link;if("overlay"==cta.cta_type)link="/popups"+link;if("hook"==cta.cta_type)link="/messages"+link;if("bar"==cta.cta_type)link="/sticky-bars"+link;link=link+"&utm_content="+cta.id;if($cf(powered_by).find("a").attr("href","https://www.convertflow.com"+encodeURI(link)),"page"==cta.cta_type||"bar"==cta.cta_type||"overlay"==cta.cta_type&&"dark"==variant.options["container-background"]?($cf(powered_by).css({background:"rgba(22, 31, 49, 0.85)"}),$cf(powered_by).find("a").each(function(){$cf(this)[0].style.setProperty("color","#fff","important")}),$cf(powered_by).find("img").attr("src","https://img.convertflow.co/static/convertflow-crafted-in-icon-white.png")):($cf(powered_by).css({background:"overlay"==cta.cta_type||"hook"==cta.cta_type&&$cf(window).width()<=480?"rgba(255, 255, 255, 0.95)":"none"}),$cf(powered_by).find("a").each(function(){$cf(this)[0].style.setProperty("color","#bbb","important")}),$cf(powered_by).find("img").attr("src","https://img.convertflow.co/static/convertflow-crafted-in-icon-grey.png")),"overlay"==cta.cta_type){if($cf(powered_by).css({position:"fixed","z-index":"100000",cursor:"pointer"}),$cf.extend(popup_css,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%","overflow-y":"auto","z-index":"100001",opacity:"0",transition:"opacity 0.2 ease"}),"dark"!==variant.options["container-background"]?popup_css.background="rgba(250, 250, 255, 0.88)":popup_css.background="rgba(15, 21, 33, 0.89)","boxed"==cta.overlay_type){var boxed_style={};480<$cf(window).width()?($cf.extend(boxed_style,{position:"absolute","margin-left":"auto","margin-right":"auto","margin-top":"4%",cursor:"initial","z-index":"99998",left:"0",right:"0","margin-bottom":"4%"}),boxed_style["max-width"]=variant.options["container-width"],app.helpers.IE()&&(boxed_style.width=variant.options["container-width"])):($cf.extend(boxed_style,{position:"absolute","margin-left":"auto","margin-right":"auto","margin-top":"16%","margin-bottom":"4%","max-width":"90%",width:"100%","min-width":"310px",cursor:"initial","z-index":"99998",left:"0",right:"0"}),close_css.top="1%"),"100%"==variant.options["container-width"]&&(boxed_style["margin-top"]="0px",boxed_style["margin-bottom"]="0px",boxed_style["max-width"]="100%"),$cf.extend(trigger_css,boxed_style)}if("splash"==cta.overlay_type){480<$cf(window).width()?$cf.extend(trigger_css,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",cursor:"initial","z-index":"99998"}):$cf.extend(close_css,{top:"2%"})}if(variant.options["close-style"]==undefined||"default"==variant.options["close-style"]){var close_style={position:"fixed",right:"3%",top:"3%",padding:"0",width:"28px",height:"28px","border-radius":"20px","text-align":"center","line-height":"24px","font-size":"18px","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","font-family":"Verdana, Arial, San-serif",cursor:"pointer","z-index":"99999","box-shadow":"rgba(0, 0, 0, 0.2) 0px 3px 50px 0px",background:"#fff",color:"rgb(137, 148, 176)"};$cf.extend(close_css,close_style)}var powered_by_div=embed}if("hook"==cta.cta_type){if(480<$cf(window).width()){if($cf(powered_by).css({position:"absolute","z-index":"100000",cursor:"pointer","max-width":"100%",bottom:"0px","border-radius":"0px 0px 3px 3px"}),"full"!==cta.hook_type){var corner_style={};if(1==app.website.powered_by?(corner_style.bottom="0px",corner_style["padding-bottom"]="30px"):(corner_style["padding-bottom"]="0px",corner_style.bottom="20px"),$cf.extend(corner_style,{position:"fixed","z-index":"99999"}),"vertical"!=cta.hook_type||variant.options["container-width"]!=undefined&&"310px"!=variant.options["container-width"]||$cf.extend(corner_style,{width:"310px"}),("horizontal"==cta.hook_type||"vertical"==cta.hook_type&&"500px"==variant.options["container-width"])&&$cf.extend(corner_style,{width:"500px"}),variant.options["cta-position"]!=undefined&&"right"!=variant.options["cta-position"]||(corner_style.right="20px"),"left"==variant.options["cta-position"]&&(corner_style.left="20px"),"center"==variant.options["cta-position"]&&(corner_style.right="0",corner_style.left="0",corner_style["margin-left"]="auto",corner_style["margin-right"]="auto"),$cf(embed).children('div[id="cta_'+cta.id+'"]').children(".cf-container").css({"max-height":"700px","overflow-y":"auto"}),variant.options["close-style"]==undefined||"default"==variant.options["close-style"])close_style={position:"absolute",right:"5px",top:"5px",width:"20px",height:"20px","border-radius":"20px","text-align":"center","line-height":"18px","font-size":"14px","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","font-family":"Verdana, Arial, San-serif",cursor:"pointer","z-index":"99999",background:"rgba(242, 245, 249, 1)",color:"rgb(137, 148, 176)"};$cf.extend(trigger_css,corner_style);powered_by_div=trigger}if("full"==cta.hook_type){if($cf(powered_by).css({"margin-left":"-20px","max-width":"390px"}),$cf.extend(popup_css,{position:"fixed",top:"0",right:"0",width:"100%","max-width":"390px",height:"100%","overflow-y":"auto","z-index":"100000",opacity:"0",transition:"opacity 0.2 ease","box-shadow":"rgba(0, 0, 0, 0.290196) 0px 2px 5px 0px",padding:"0px 20px","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),"dark"!==variant.options["container-background"]?popup_css.background="rgba(250, 250, 255, 0.88)":popup_css.background="rgba(15, 21, 33, 0.89)",variant.options["close-style"]==undefined||"default"==variant.options["close-style"]){close_style={position:"absolute",right:"3%",top:"1%",width:"25px",height:"25px","border-radius":"20px","text-align":"center","line-height":"22px","font-size":"16px","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","font-family":"Verdana, Arial, San-serif",cursor:"pointer","z-index":"99999"};"dark"!==variant.options["container-background"]?close_style.background="#f8fafd":close_style.background="#202631",close_style.color="#8994b0"}$cf.extend(trigger_css,{width:"310px",position:"relative","margin-top":"16%","padding-bottom":"50px","margin-left":"auto","margin-right":"auto","margin-bottom":"4%"});powered_by_div=embed}}if($cf(window).width()<=480){$cf.extend(popup_css,{position:"fixed",top:"0",right:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.25)","overflow-y":"auto","z-index":"100000",opacity:"0",transition:"opacity 0.2 ease",padding:"0px","box-shadow":"rgba(0, 0, 0, 0.290196) 0px 2px 5px 0px"}),$cf.extend(trigger_css,{width:"90%","min-width":"310px",position:"relative","margin-top":"16%","padding-bottom":"30px","margin-left":"auto","margin-right":"auto","margin-bottom":"4%"}),$cf(powered_by).css({position:"fixed"}),$cf(powered_by).each(function(){$cf(this)[0].style.setProperty("margin-left","inherit","important")});powered_by_div=embed;if(variant.options["close-style"]==undefined||"default"==variant.options["close-style"])close_style={position:"absolute",right:"5px",top:"5px",width:"25px",height:"25px","border-radius":"20px","text-align":"center","line-height":"22px","font-size":"16px","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","font-family":"Verdana, Arial, San-serif",cursor:"pointer","z-index":"99999",background:"#f8fafd",color:"#8994b0"};$cf(embed).find(".cf-profile").css("max-width","100%"),$cf(powered_by).css("max-width","100%").css("margin-left","0px"),$cf(powered_by).find(".cf-powered-by img").css("opacity","1"),$cf(powered_by).find(".cf-powered-by a").css("color","#fff")}$cf.extend(close_css,close_style)}if("page"==cta.cta_type)powered_by_div=embed;if("page"==cta.cta_type||"bar"==cta.cta_type){var icon=$cf(powered_by).find("img").each(function(){$cf(this)[0].style.setProperty("margin-right","2px","important"),$cf(this)[0].style.setProperty("margin-top","4px","important"),"page"==cta.cta_type&&$cf(this)[0].style.setProperty("margin-left","2px","important")});$cf(powered_by).find(".cf-powered-by-inner").prepend(icon),$cf(powered_by).find("span").first().remove(),$cf(powered_by).find("span").text("Crafted in ConvertFlow"),$cf(powered_by).find("span").each(function(){$cf(this)[0].style.setProperty("font-size","10px","important")}),$cf(powered_by).find(".cf-powered-by-inner").each(function(){$cf(this)[0].style.setProperty("max-width","135px","important")}),$cf(powered_by).css({padding:"3px",width:"147px",height:"25px",position:"fixed","z-index":"100000",cursor:"pointer",left:"0",right:"initial","line-height":"18px",background:"rgba(22, 31, 49, 0.60)","border-radius":"0px 5px 0px 0px",top:"initial",bottom:"0"})}if("bar"==cta.cta_type){$cf.extend(popup_css,{position:"fixed",right:"0",width:"100%","max-width":"100%","z-index":"100000",display:"none","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),"top"==variant.options["bar-position"]?(popup_css.top="0",$cf("html").css("transition","padding-top 0.3s").css("-webkit-transition","padding-top 0.3s")):popup_css.bottom="0";close_style={position:"fixed",right:"20px",top:"20px",padding:"0",width:"28px",height:"28px","border-radius":"20px","text-align":"center","line-height":"24px","font-size":"18px","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","font-family":"Verdana, Arial, San-serif",cursor:"pointer","z-index":"99999",background:"rgba(242, 245, 249, 1)",color:"rgb(137, 148, 176)"};$cf(window).width()<=480&&(close_style.top="10px",close_style.right="10px"),$cf(powered_by).find("span").hide(),"top"==variant.options["bar-position"]?$cf(powered_by).css({"border-radius":"0px 0px 5px 0px",top:"0",bottom:"initial"}):$cf(powered_by).css({"border-radius":"0px 5px 0px 0px",top:"initial",bottom:"0"}),$cf(powered_by).css("width","25px"),$cf(powered_by).on("mouseover",function(){$cf(this).find("span").show(),$cf(powered_by).css("width","141px")}).on("mouseleave",function(){$cf(this).find("span").hide(),$cf(powered_by).css("width","25px")});powered_by_div=embed;$cf.extend(close_css,close_style)}$cf(powered_by_div).append(powered_by),$cf(embed).css(popup_css),$cf(trigger).css(trigger_css),"page"!==cta.cta_type&&$cf(close).css(close_css)}"page"!=cta.cta_type&&("inline"!=cta.cta_type&&"overlay"!=cta.cta_type||"100%"!=variant.options["container-width"])||$cf.each(variant.steps,function(step_id,step){$cf.each(step.sections,function(section_id,section){"true"==section.options.structure["browser-height"]&&1024<$cf(window).width()&&($cf('.cf-section[section-id="'+section_id+'"]').attr("data-browser-height","true"),$cf('.cf-section[section-id="'+section_id+'"]').css("min-height",$cf(window).height()+"px"))})}),$cf(embed).css(embed_css)},app.ctas.trigger=function(cta,variant,embed){var trigger_cookie="viewedCta"+cta.id,trigger_type=variant.options.trigger_type,step=$cf.map(variant.steps,function(step){if(1==step.position)return step})[0],supression=cta.cta_type+"Triggered";"true"==variant.options.aggressive&&app.helpers.deleteCookie(trigger_cookie);var fire=function(fire_trigger_type){if(convertflow.ctas[cta.id].clicktriggered==undefined&&(convertflow[supression]==undefined||cta.broadcast_id==convertflow[supression]||cta.goal_id==convertflow[supression]||"click"==fire_trigger_type)||1==convertflow.ctas[cta.id].clicktriggered&&"click"==fire_trigger_type){if($cf(embed).css({display:"block",opacity:"1"}),$cf(embed).find('div[id="cta_'+cta.id+'"]').removeClass("cf-is-hidden"),"hook"==cta.cta_type)$cf(embed).find('div[id="cta_'+cta.id+'"]').addClass("slide-up");else if("bar"==cta.cta_type)if("bottom"==variant.options["bar-position"])$cf(embed).find('div[id="cta_'+cta.id+'"]').addClass("slide-up");else{var barHeight=$cf(embed).find('div[id="cta_'+cta.id+'"]').outerHeight();$cf("html").css("padding-top",barHeight+"px"),$cf(embed).find('div[id="cta_'+cta.id+'"]').addClass("slide-down")}else $cf(embed).find('div[id="cta_'+cta.id+'"]').addClass("is-visible");convertflow.ctas[cta.id].fired==undefined&&(convertflow.ctas[cta.id].fired=!0,step.options&&step.options.script&&$cf("body").append(step.options.script),convertflow[supression]=!0,"prehook"!==trigger_type&&1==app.live&&app.ctas.track({event_type:"View",variant_id:variant.id,step_id:step.id},cta),app.ctas.skipLogic(cta,variant,step,embed))}};this.delayed=function(){if(variant.options.delay!==undefined)var delay=1e3*parseInt(variant.options.delay);else delay=0;setTimeout(function(){!0!==convertflow.ctas[cta.id].fired&&fire("delayed")},delay)},this.scroll=function(){var length=$cf(document).height();if(variant.options.scroll!==undefined)var scroll=parseInt(variant.options.scroll);else scroll=0;var target=scroll*length/100;$cf(window).off("scroll.cta"+cta.id).on("scroll.cta"+cta.id,function(){$cf(window).scrollTop()>=target&&"block"!=$cf(embed).css("display")&&!0!==convertflow.ctas[cta.id].fired&&fire("scroll")})},this.exit=function(){function setDefault(_property,_default){return void 0===_property?_default:_property}function setDefaultCookieExpire(days){var ms=24*days*60*60*1e3,date=new Date;return date.setTime(date.getTime()+ms),"; expires="+date.toUTCString()}function handleMouseleave(e){e.clientY>sensitivity||checkCookieValue(cookieName,"true")&&!aggressive||(_delayTimer=setTimeout(_fireAndCallback,delay))}function handleMouseenter(){_delayTimer&&(clearTimeout(_delayTimer),_delayTimer=null)}function checkCookieValue(cookieName,value){return parseCookies()[cookieName]===value}function parseCookies(){for(var cookies=document.cookie.split("; "),ret={},i=cookies.length-1;0<=i;i--){var trigger=cookies[i].split("=");ret[trigger[0]]=trigger[1]}return ret}function _fireAndCallback(){!0!==convertflow.ctas[cta.id].fired&&fire("exit")}if(480<$cf(window).width()){var config=config||{},aggressive=config.aggressive||!1,sensitivity=setDefault(config.sensitivity,20),delay=(setDefault(config.timer,1e3),setDefault(config.delay,0)),cookieName=(config.callback,setDefaultCookieExpire(config.cookieExpire),config.cookieDomain&&location.hostname.split(".").slice(-2).join("."),config.cookieName?config.cookieName:trigger_cookie),_delayTimer=(config.sitewide,null);document.documentElement;trigger_type=config.trigger_type,animation=config.animation;$cf(window).off("mouseleave.cta"+cta.id).on("mouseleave.cta"+cta.id,handleMouseleave),$cf(window).off("mouseenter.cta"+cta.id).on("mouseenter.cta"+cta.id,handleMouseenter)}$cf(window).width()<=480&&"false"!==variant.options["trigger-mobile-exit"]&&window.history&&window.history.pushState&&(window.addEventListener("popstate",function(){""!==location.hash.split("#!/")[1]&&(""===window.location.hash&&!0!==convertflow.ctas[cta.id].fired&&fire("exit"))}),window.history.pushState("forward",null,null))},this.clickPop=function(){$cf(document).on("click",".cta-"+cta.id+"-trigger",function(){$cf(this).attr("data-validated")!=undefined&&"true"!=$cf(this).attr("data-validated")||($cf(".cf-"+cta.cta_type).hide(),fire("click"))})},this.profilePop=function(){if(convertflow.profileTriggered==undefined&&variant.profilepop!==undefined){$cf("body").append(variant.profilepop),$cf(".cta"+cta.id+".cf-prehook-popup").css("display","none");var showProfile=function(){if(convertflow.hookTriggered==undefined||convertflow.profileTriggered==undefined&&(cta.broadcast_id==convertflow[supression]||cta.goal_id==convertflow[supression])){convertflow.hookTriggered=!0,convertflow.profileTriggered=!0;var profile=".cta"+cta.id+" .prehook-message";app.ctas.mergeTags(profile),$cf(profile).find("p").attr("style",'margin: 0 !important; font-family: "Helvetica Neue", Helvetica, Arial, San-serif !important; font-size: 16px !important; color: #6f818e; line-height: 1.4 !important; padding: 0px; -webkit-font-smoothing: subpixel-antialiased; -moz-osx-font-smoothing: initial; font-smoothing: subpixel-antialiased;'),$cf(".cta"+cta.id+".cf-prehook-popup").addClass("slide-up"),app.ctas.track({event_type:"View",variant_id:variant.id},cta),app.ctas.closeOut(cta,variant,embed,".cta"+cta.id+".cf-prehook-popup .prehook-close"),$cf(".cta"+cta.id).find(".cf-prehook-button").click(function(){fire("click"),$cf(".cta"+cta.id+".cf-prehook-popup").remove()})}};if("scroll"==variant.options["prehook-trigger-type"]){var length=$cf(document).height();if(variant.options.scroll!==undefined)var scroll=parseInt(variant.options.scroll);else scroll=0;var target=scroll*length/100;$cf(window).scroll(function(){$cf(window).scrollTop()>=target&&window.prehookTrigger==undefined&&!0!==convertflow.ctas[cta.id].fired&&showProfile("scroll")})}if("delayed"==variant.options["prehook-trigger-type"]){if(variant.options.scroll!==undefined)var delay=1e3*parseInt(variant.options.delay);else delay=0;setTimeout(function(){!0!==convertflow.ctas[cta.id].fired&&showProfile("delayed")},delay)}"immediate"!=variant.options["prehook-trigger-type"]&&variant.options["prehook-trigger-type"]!=undefined||!0!==convertflow.ctas[cta.id].fired&&showProfile("delayed")}},$cf(document).on("trigger_CTA_"+cta.id,function(){$cf(".cf-"+cta.cta_type).hide(),fire("click")}),1==app.live?app.helpers.getCookie(trigger_cookie)!=undefined&&null!=app.helpers.getCookie(trigger_cookie)&&""!=app.helpers.getCookie(trigger_cookie)||("exit"==variant.options.trigger_type&&this.exit(),"delayed"==variant.options.trigger_type&&this.delayed(),"scroll"==variant.options.trigger_type&&this.scroll(),"prehook"==variant.options.trigger_type&&this.profilePop()):fire("click"),this.clickPop()},app.ctas.closeOut=function(cta,variant,embed,selector){if(selector==undefined)selector="#cta"+cta.id+" .cf-cta-close";$cf(selector).on("click",function(){if($cf(embed).hide(),$cf(".cta"+cta.id+".cf-prehook-popup").removeClass("slide-up").hide(),variant.options.hide)var expire=24*parseInt(variant.options.hide)*60;else expire=0;app.helpers.setCookie("viewedCta"+cta.id,"true",expire),"bar"==cta.cta_type&&"top"==variant.options["bar-position"]&&$cf("html").css("transition","").css("-webkit-transition","").css("padding-top","0")})},app.ctas.track=function(event,cta,element){$cf.extend(event,{website_id:app.website_id,visitor_token:app.visitors.uid(),contactable_type:"Cta",contactable_id:cta.id,url:app.helpers.cleanURL(window.location.href)});var skip_database_storage,position=undefined;if(cta.broadcast_id!==undefined&&(event.broadcast_id=cta.broadcast_id),cta.flow_id!==undefined&&(event.flow_id=cta.flow_id),cta.stage_id!==undefined&&(event.stage_id=cta.stage_id),cta.goal_id!==undefined&&(event.goal_id=cta.goal_id),event.variant_id!==undefined&&event.step_id==undefined){var variant=cta.variants[event.variant_id],step=$cf.map(variant.steps,function(step){if(1==step.position)return step})[0];position=step.position;step!==undefined&&step.id!==undefined&&(event.step_id=step.id)}("Completion"==event.event_type||"Complete"==event.event_type&&-1<$cf.inArray(element.element_type,["form","survey"]))&&(skip_database_storage=!0),app.ctas.trackGA(cta,event,position),app.visitors.trackEvent(event,skip_database_storage)},app.ctas.trackGA=function(cta,event){if("true"==app.website.google_analytics_track){var event_names={View:"View",Complete:"Conversion",Completion:"Completion"},name="";if("inline"==cta.cta_type)name=name+"Embedded \u2013 ";else{var capitalized=cta.cta_type.charAt(0).toUpperCase()+cta.cta_type.slice(1);name=name+capitalized+" ("+cta.id+") \u2013 "}if(cta.name!==undefined&&""!==cta.name)name=name+cta.name;else name=name+"Cta "+cta.id;if(cta.variants[event.variant_id]){var variant=cta.variants[event.variant_id];name=name+" (Variant "+variant.variation.toUpperCase()+")";if(event.step_id){var step=variant.steps[event.step_id];name=name+" \u2013 Step "+step.position}}if(window.ga!==undefined&&window.ga.getAll!==undefined&&event_names[event.event_type]!==undefined&&$cf.each(ga.getAll(),function(index,tag){var ga_event={hitType:"event",eventCategory:app.website.google_analytics_category,eventAction:event_names[event.event_type],eventLabel:name};"View"==event.event_type&&(ga_event.nonInteraction=!0),ga(tag.get("name")+".send",ga_event)}),window.gtag!==undefined&&event_names[event.event_type]!==undefined){var ga_event={event_category:app.website.google_analytics_category,event_label:name};"View"==event.event_type&&(ga_event.non_interaction=!0),gtag("event",event_names[event.event_type],ga_event)}}},app.ctas.skipLogic=function(cta,variant,step,embed){if(step.trueActionGroup=undefined,step.action_groups!==undefined&&$cf.each(step.action_groups,function(i,action_group){step.trueActionGroup==undefined&&1==app.campaigns.checkConditions(action_group.conditions,convertflow.person)&&(step.trueActionGroup=action_group)}),step.trueActionGroup!==undefined){var action_group=step.trueActionGroup;app.ctas.runLogic(embed,cta,variant,step,undefined,undefined,action_group,action_group.data)}return step.trueActionGroup},app.ctas.forms=function(cta,variant,embed){$cf.each(variant.steps,function(step_id,step){$cf.each(step.sections,function(section_id,section){$cf.each(section.elements,function(element_id,element){"form"==element.element_type&&$cf(embed).find('.cf-cta-item[data-type="form"][data-id="'+element_id+'"]').each(function(index,cta_item){var form=$cf(cta_item).find("form"),form_container=$cf(embed).find('div[id="element'+element_id+'_form"]');$cf(form).find('input[name="contact[visitor_token]"]').val(app.visitors.uid()),$cf(form).find(".cf-form-fields").each(function(index,field_container){var fields=$cf(field_container).find(".cf-form-field").sort(function(a,b){return $cf(a).attr("data-pos")-$cf(b).attr("data-pos")});$cf(field_container).find(".cf-form-field").remove(),$cf(field_container).append(fields)}),$cf(form).find(".cf-select").each(function(index,radio_field){$cf(radio_field).find('input[type="radio"]').each(function(index,radio_option){$cf(radio_option).click(function(){"true"==$cf(radio_option).attr("checkstate")?($cf(radio_option).prop("checked",!1),$cf(radio_option).attr("checkstate","false")):($cf(radio_field).find('input[type="radio"]').prop("checked",!1),$cf(radio_field).find('input[type="radio"]').attr("checkstate","false"),$cf(radio_option).prop("checked",!0),$cf(radio_option).attr("checkstate","true"))})}),$cf(radio_field).find('input[type="checkbox"]').each(function(index,checkbox){$cf(checkbox).on("change",function(){var checkbox_values=$cf(form).find('input[type="checkbox"][data-slug="'+$cf(checkbox).attr("data-slug")+'"]:checked').map(function(){return this.value}).get().join(", ");$cf(form).find('input[name="'+$cf(checkbox).attr("data-slug")+'"][type="hidden"]').val(checkbox_values)})})}),"horizontal"==element.options["form-type"]&&$cf(window).width()<481&&("cf-field-regular"!==element.options["field-size"]||1<$cf(form_container).find('.cf-form-field[data-visible="true"]').length||"true"==$cf(form_container).attr("data-consent"))&&$cf(form_container).removeClass("cf-form-horizontal").addClass("cf-form-vertical"),"horizontal"==element.options["form-type"]&&480<$cf(window).width()&&$cf(form_container).find('.cf-form-field[data-visible="true"]').each(function(i,field){4<=i&&$cf(field).attr("data-visible","false")});var button=$cf(form).find(".cf-button")[0];$cf(button).on("mouseover",function(){element.options["button\u2013hover-color"]&&button.style.setProperty("background",element.options["button\u2013hover-color"],"important"),element.options["button\u2013hover-text-color"]&&button.style.setProperty("color",element.options["button\u2013hover-text-color"],"important"),element.options["button-hover-border-color"]&&button.style.setProperty("border-color",element.options["button-hover-border-color"],"important")}),$cf(button).on("mouseleave",function(){button.style.setProperty("background",element.options["button-color"],"important"),button.style.setProperty("color",element.options["button-text-color"],"important");var border_color=element.options["button-color"];if(element.options["button-border-color"])border_color=element.options["button-border-color"];button.style.setProperty("border-color",border_color,"important")}),$cf(form).find('input[name="contact[source_url]"]').val(app.helpers.cleanURL(window.location.href)),$cf.each(["broadcast_id","flow_id","stage_id","goal_id"],function(index,campaign_id){convertflow.ctas[cta.id][campaign_id]!==undefined&&$cf(form).find('input[name="contact['+campaign_id+']"]').val(convertflow.ctas[cta.id][campaign_id])});var contactFields={name:["name","first_name","firstname","f_name","fname"],last_name:["last_name","lastname","last","l_name","lname"],email:["email","emailaddress","email_address"],phone:["phone","phone_number","telephone","cellphone","cell"],url:["website"],company_name:["company_title","company","company_title","companyname","company_name"],company_title:["company_title","job","jobtitle","job_title"],city:["city"],country:["country"],address:["address","streetaddress","address1"],state:["state","region"],zip_code:["zip_code","zipcode","postal","postalcode"]};$cf.each(contactFields,function(database_field,field_names){var attribute=undefined;if("last_name"!==database_field)var custom_params=element.options[database_field.replace("_","-")+"-prefill-params"];else custom_params=element.options["lastname-prefill-params"];custom_params&&$cf.each(custom_params.split(","),function(i,custom_param_name){(custom_param_name=custom_param_name.replace(" ",""))&&app.helpers.getParameterByName(custom_param_name)&&(attribute=app.helpers.getParameterByName(custom_param_name))}),attribute||$cf.each(field_names,function(i,contact_field){(""!==app.helpers.getParameterByName(contact_field)||""==$cf(form).find('input[name="contact['+database_field+']"]').val()&&convertflow.person!==undefined&&convertflow.person[database_field])&&(convertflow.person!==undefined&&convertflow.person[database_field]&&(attribute=convertflow.person[database_field]),app.helpers.getParameterByName(contact_field)&&(attribute=app.helpers.getParameterByName(contact_field)))}),attribute&&($cf(form).find('input[name="contact['+database_field+']"]').val(attribute),"true"==element.options["hide-prefilled-fields"]&&"horizontal"!==element.options["form-type"]&&$cf(form).find('input[name="contact['+database_field+']"]').attr("prefilled","true"))}),$cf.each(element.fields,function(i,field){if(field.field_type!==undefined&&"survey"!==field.field_type&&field.slug){var person_field=undefined,url_parameter=undefined;if(convertflow.person!==undefined&&convertflow.person.extra!==undefined&&null!==convertflow.person.extra&&convertflow.person.extra[field.slug]!==undefined&&null!==convertflow.person.extra[field.slug]&&""!==convertflow.person.extra[field.slug])person_field=convertflow.person.extra[field.slug];if(field.value)url_parameter=person_field=field.value;if(field.url_params){var custom_param=$cf(field.url_params.split(",")).map(function(i,custom_param_name){custom_param_name=custom_param_name.replace(" ","");if(!custom_param&&custom_param_name&&app.helpers.getParameterByName(custom_param_name)){var custom_param=app.helpers.getParameterByName(custom_param_name);return custom_param}})[0];if(custom_param)url_parameter=person_field=custom_param}if(app.helpers.getParameterByName(field.slug))person_field=app.helpers.getParameterByName(field.slug);if(person_field!==undefined){var field_selector=undefined;if("text"==field.field_type||"hidden"==field.field_type)field_selector='input[name="contact[extra]['+field.slug+']"]';if("paragraph"==field.field_type)field_selector='textarea[name="contact[extra]['+field.slug+']"]';if("dropdown"==field.field_type)field_selector='select[name="contact[extra]['+field.slug+']"]';if("radio"==field.field_type||"select"==field.field_type)field_selector='input[name="contact[extra]['+field.slug+']"]';if(field_selector!==undefined){if("text"!=field.field_type&&"hidden"!=field.field_type&&"paragraph"!=field.field_type&&"dropdown"!=field.field_type||$cf(form).find(field_selector).val()&&!url_parameter||$cf(form).find(field_selector).val(person_field),("radio"==field.field_type||"select"==field.field_type)&&($cf(person_field.split(", ")).each(function(i,person_field_value){$cf(form).find('[value="'+person_field_value+'"]').prop("checked",!0)}),1==field.multi_select)){var checkbox_values=$cf(form).find('input[data-slug="contact[extra]['+field.slug+']"][type="checkbox"]:checked').map(function(){return this.value}).get().join(", ");$cf(form).find(field_selector+'[type="hidden"]').val(checkbox_values)}"true"==element.options["hide-prefilled-fields"]&&$cf(form).find(field_selector).attr("prefilled","true")}}}}),$cf(form).find('[prefilled="true"]').hide(),$cf(form).find('[prefilled="true"]').each(function(i,prefilled_input){$cf(prefilled_input).parents(".cf-form-field").each(function(i,prefilled_field){prefilled_field.style.setProperty("display","none","important")})});var submitForm=function(form){if(email_value=$cf(form).find('input[name="contact[email]"]').val()){var email_value=email_value.toLowerCase();$cf(form).find('input[name="contact[email]"]').val(email_value)}var formData=$cf(form).serializeArray(),contactFields=["email","name","last_name","phone","website","company_name","company_title","city","country","address","state","zip_code","extra"],submittedFields={};$cf.each(formData,function(index,contact_field){if(-1==contact_field.name.indexOf("extra")){var field_name=contact_field.name.replace("contact[","").replace("]","");-1<$cf.inArray(field_name,contactFields)&&0<contact_field.value.length&&contact_field.value!==undefined&&""!==contact_field.value&&($cf('span[data-merge="'+field_name+'"]').text(contact_field.value),convertflow.person[field_name]=contact_field.value,submittedFields[field_name]=contact_field.value,$cf(".new_contact").each(function(index,contact_form){$cf(contact_form).find('input[name="contact['+field_name+']"]').val(contact_field.value)}))}else{field_name=contact_field.name.replace("contact[","").replace("[","").replace("]","").replace("extra","").replace("]","");contact_field.value!==undefined&&""!==contact_field.value&&($cf('span[data-merge="'+field_name+'"]').text(contact_field.value),convertflow.person.extra=convertflow.person.extra||{},convertflow.person.extra[field_name]=contact_field.value,submittedFields[field_name]=contact_field.value,$cf(".new_contact").each(function(index,contact_form){var contact_form_field=$cf(contact_form).find('input[name="contact[extra]['+field_name+']"]');$cf(contact_form_field).val()||$cf(contact_form_field
).val(contact_field.value)}))}});var contactData="cf2=true&"+(contactData=$cf(form).serialize());if(1==app.live){var action_groups=[];if(element.action_groups!==undefined&&$cf.each(element.action_groups,function(i,action_group){action_group.data["confirmation-type"]&&0==$cf.isEmptyObject(action_group.conditions)&&1==app.campaigns.checkConditions(action_group.conditions,window.convertflow.person)&&action_groups.push(action_group.id)}),0<action_groups.length)contactData="action_groups="+action_groups.join()+"&"+contactData;app.localstorage&&app.helpers.compressAndStore(app.local_person,convertflow.person),$cf.ajax({type:"POST",url:app.api_contacts,data:contactData,dataType:"json",success:function(){}})}element.contactData=contactData,app.ctas.conversionLogic(embed,cta,variant,step,section,element,submittedFields)},field=$cf(form).find('input[name="contact[email]"]'),icon=$cf(form).find(".cf-email-validation"),icon_big_error="https://img.convertflow.co/static/validation-big-error.png",icon_big_success="https://img.convertflow.co/static/validation-big-success-grey.png",icon_big_success_green="https://img.convertflow.co/static/validation-big-success.png",icon_loader="https://img.convertflow.co/static/loader.png";element.validated=!1,element.ran_validation=!1;var validateEmailFormat=function(){var email=$cf(field).val().toLowerCase(),filter=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return""==field.val()&&($cf(icon).hide(),$cf(icon).attr("style","transition: background 1s ease, border 1s ease;"),$cf(icon).attr("src")!=icon_big_error&&$cf(icon).removeClass("cf-spinner").attr("src",icon_big_error)),filter.test(email)?($cf(icon).attr("src")!=icon_big_success&&$cf(icon).removeClass("cf-spinner").attr("src",icon_big_success),!0):($cf(icon).attr("src")!=icon_big_error&&$cf(icon).removeClass("cf-spinner").attr("src",icon_big_error),!1)},mailserverValidate=function(form){function validationIcon(){0!=element.validated||0!=element.ran_validation||icon.attr("src")!=icon_loader&&icon.attr("src")!=icon_big_success?1==element.ran_validation&&1==element.validated?icon.attr("src",icon_big_success_green).removeClass("cf-spinner"):1==element.ran_validation&&0==element.validated&&icon.attr("src",icon_big_error).removeClass("cf-spinner"):(icon.attr("src")!=icon_loader&&icon.attr("src",icon_loader).addClass("cf-spinner"),setTimeout(function(){validationIcon()},1500))}cta.validation;var email=$cf(field).val().toLowerCase(),tooltip=$cf(form).find(".cf-validation-tooltip").first();$cf(form).find('button[type="submit"]').attr("disabled",!0),1==element.ran_validation&&(element.ran_validation=!1),validationIcon(),$cf.ajax({url:app.api_contacts_validate+"?email="+email,dataType:"JSONP",timeout:1e4,success:function(json){$cf(form).find('button[type="submit"]').removeAttr("disabled"),1==json.smtp_check?($cf(icon).show(),$cf(icon).attr("src")!=icon_big_success_green&&$cf(icon).attr("src",icon_big_success_green).removeClass("cf-spinner"),$cf(field).attr("style","border: 1px solid rgb(133, 209, 164) !important; background: rgb(242, 255, 248) !important; transition: background 0.5s ease, border 0.5s ease;"),$cf(tooltip).length&&$cf(tooltip).hide(),$cf(tooltip).find(".cf-tooltip-arrow").attr("style","border-top-color: #27ae60"),$cf(tooltip).find(".cf-tooltip-inner").attr("style","background-color: #27ae60").html("Email validated!"),$cf(tooltip).fadeIn(300),setTimeout(function(){$cf(field).attr("style","transition: background 1s ease, border 1s ease;"),$cf(tooltip).fadeOut(500)},1500),element.validated=!0,element.ran_validation=!0,submitForm(form)):($cf(icon).show(),$cf(icon).attr("src")!=icon_big_error&&$cf(icon).attr("src",icon_big_error).removeClass("cf-spinner"),$cf(field).attr("style","border: 1px solid #F17C69 !important; background: #FEF3F0 !important; transition: background 0.5s ease, border 0.5s ease;"),$cf(tooltip).hide(),null==json.did_you_mean||""==json.did_you_mean?($cf(tooltip).find(".cf-tooltip-arrow").attr("style","border-top-color: #e74c3c"),$cf(tooltip).find(".cf-tooltip-inner").attr("style","background-color: #e74c3c").html("Enter a better email"),$cf(tooltip).fadeIn(300),setTimeout(function(){$cf(field).attr("style","transition: background 1s ease, border 1s ease;"),$cf(tooltip).fadeOut(500)},1500)):($cf(tooltip).find(".cf-tooltip-arrow").css("border-top-color","#0056ff"),$cf(tooltip).find(".cf-tooltip-inner").attr("style","background-color: #0056ff; text-align: left; max-width: 300px; line-height: 0; padding: 10px !important").html('<span class="cf-didyoumean" style="line-height: 1.3em; cursor: pointer;"></span>'),$cf(tooltip).find(".cf-didyoumean").html('Did you mean <span class="cf-didyoumeanemail" style="text-decoration: underline">'+json.did_you_mean+"</span>?"),$cf(tooltip).find(".cf-didyoumeanemail").on("click",function(){$cf(field).val(json.did_you_mean),$cf(tooltip).hide(),$cf(icon).attr("src",icon_big_success_green).removeClass("cf-spinner")}),$cf(tooltip).fadeIn(300),$cf(tooltip).on("click",function(){$cf(field).attr("style","transition: background 1s ease, border 1s ease;"),$cf(this).remove()})),element.ran_validation=!0,element.validated=!1)},error:function(){element.validated=!0,$cf(form).find('button[type="submit"]').removeAttr("disabled"),submitForm(form)}})};$cf(form).attr("action",""),$cf.validator.messages.required="",$cf(form).find('input[name="contact[email]"]').keyup(function(){validateEmailFormat(form)}),$cf(form).validate({highlight:function(element){0==app.helpers.IE()&&"true"!==$cf(form).attr("data-validity-reported")&&($cf(form).attr("data-validity-reported","true"),$cf(form)[0].reportValidity()),$cf(element).addClass("cf-error")},unhighlight:function(element){$cf(element).removeClass("cf-error")},submitHandler:function(form,event){return event.preventDefault(),"false"==element.options["show-email"]||1==validateEmailFormat(form)?"none"!==$cf(field).css("display")&&0==app.helpers.IE()?(icon.show(),"true"==element.options["validate-email"]&&"false"!==element.options["show-email"]?mailserverValidate(form):submitForm(form)):submitForm(form):(icon.show(),icon.attr("src")!=icon_big_error&&icon.attr("src",icon_big_error)),!1}})})})})})},app.ctas.buttons=function(cta,variant,embed){$cf.each(variant.steps,function(step_id,step){$cf.each(step.sections,function(section_id,section){$cf.each(section.elements,function(element_id,element){"button"==element.element_type&&$cf(embed).find('.cf-cta-item[data-type="button"][data-id="'+element_id+'"]').each(function(index,cta_item){var button=$cf(cta_item).find(".cf-button")[0];$cf(button).on("click",function(){app.ctas.conversionLogic(embed,cta,variant,step,section,element)}),$cf(button).on("mouseover",function(){element.options["button\u2013hover-color"]&&button.style.setProperty("background",element.options["button\u2013hover-color"],"important"),element.options["button\u2013hover-text-color"]&&button.style.setProperty("color",element.options["button\u2013hover-text-color"],"important"),element.options["button-hover-border-color"]&&button.style.setProperty("border-color",element.options["button-hover-border-color"],"important")}),$cf(button).on("mouseleave",function(){button.style.setProperty("background",element.options["button-color"],"important"),button.style.setProperty("color",element.options["button-text-color"],"important");var border_color=element.options["button-color"];if(element.options["button-border-color"])border_color=element.options["button-border-color"];button.style.setProperty("border-color",border_color,"important")})})})})})},app.ctas.surveys=function(cta,variant,embed){$cf.each(variant.steps,function(step_id,step){$cf.each(step.sections,function(section_id,section){$cf.each(section.elements,function(element_id,element){"survey"==element.element_type&&$cf(embed).find('.cf-cta-item[data-type="survey"][data-id="'+element_id+'"]').each(function(index,cta_item){var field_div=$cf(cta_item).find(".cf-survey-field"),custom_field=$cf(field_div).attr("data-field"),field_submit=$cf(cta_item).find(".cf-survey-next-outer"),submitSurvey=function(custom_field,custom_field_value){var contactData={visitor_token:convertflow.person.visitor_token,element_id:element.id,step_id:step.id,variant_id:variant.id,contactable_type:"Cta",contactable_id:cta.id,website_id:app.website.id,extra:{}};convertflow.person.email!==undefined&&""!==convertflow.person.email&&(contactData.email=convertflow.person.email),$cf.each(["broadcast_id","flow_id","stage_id","goal_id"],function(index,campaign_id){convertflow.ctas[cta.id][campaign_id]!==undefined&&(contactData[campaign_id]=convertflow.ctas[cta.id][campaign_id])}),custom_field&&custom_field_value&&(convertflow.person.extra=convertflow.person.extra||{},convertflow.person.extra[custom_field]=custom_field_value,contactData.extra=convertflow.person.extra);var payload={contact:contactData,cf2:!0},action_groups=[];element.action_groups!==undefined&&$cf.each(element.action_groups,function(i,action_group){action_group.data["confirmation-type"]&&0==$cf.isEmptyObject(action_group.conditions)&&1==app.campaigns.checkConditions(action_group.conditions,window.convertflow.person)&&action_groups.push(action_group.id)}),0<action_groups.length&&(payload.action_groups=action_groups.join()),1==app.live&&($cf.ajax({type:"POST",url:app.api_contacts,data:payload,dataType:"json",success:function(){}}),app.localstorage&&app.helpers.compressAndStore(app.local_person,convertflow.person)),custom_field&&custom_field_value&&($cf('span[data-merge="'+custom_field+'"]').text(custom_field_value),$cf(".new_contact").each(function(index,contact_form){$cf(contact_form).find('input[name="contact[extra]['+custom_field+']"]').val(custom_field_value)}));var submittedFields={};submittedFields[custom_field]=custom_field_value,app.ctas.conversionLogic(embed,cta,variant,step,section,element,submittedFields)},is_multi_select=$cf(field_div).attr("data-multi-select");$cf(field_div).find(".cf-survey-choice").on("click",function(){var custom_field_value=$cf(this).attr("data-value");"true"!==is_multi_select&&($cf(field_div).find(".cf-survey-choice").each(function(){$cf(this).removeAttr("data-selected")}),$cf(this).attr("data-selected","true"),submitSurvey(custom_field,custom_field_value)),"true"==is_multi_select&&("true"!==$cf(this).attr("data-selected")?$cf(this).attr("data-selected","true"):$cf(this).removeAttr("data-selected"),$cf(field_submit).show())}),"true"==is_multi_select&&$cf(field_submit).find(".cf-survey-next").on("click",function(){var custom_field_values=[];$cf(field_div).find('.cf-survey-choice[data-selected="true"]').each(function(i,choice){custom_field_values.push($cf(choice).attr("data-value"))});var custom_field_value=custom_field_values.join(", ");submitSurvey(custom_field,custom_field_value)}),$cf(field_div).find(".cf-survey-choice").each(function(i,button){$cf(button).on("mouseover",function(){element.options["button\u2013hover-color"]&&button.style.setProperty("background",element.options["button\u2013hover-color"],"important"),element.options["button\u2013hover-text-color"]&&button.style.setProperty("color",element.options["button\u2013hover-text-color"],"important"),element.options["button-hover-border-color"]&&button.style.setProperty("border-color",element.options["button-hover-border-color"],"important")}),$cf(button).on("mouseleave",function(){button.style.setProperty("background",element.options["button-color"],"important"),button.style.setProperty("color",element.options["button-text-color"],"important");var border_color=element.options["button-color"];if(element.options["button-border-color"])border_color=element.options["button-border-color"];button.style.setProperty("border-color",border_color,"important")})})})})})})},app.ctas.conversionLogic=function(embed,cta,variant,step,section,element,field_data){0==("true"==element.options["confirmation-close"]&&"true"==element.options["disable-conversion"]&&("redirect"==element.options["confirmation-type"]||"cta"==element.options["confirmation-type"]||element.options["confirmation-type"]==undefined&&(element.options["redirect-url"]!==undefined&&""!==element.options["redirect-url"]||element.options["confirmation-cta"]!==undefined&&""!==element.options["confirmation-cta"])))&&$cf(embed).find('.cf-element[data-id="'+element.id+'"]').attr("data-tracked")==undefined&&($cf(embed).find('.cf-element[data-id="'+element.id+'"]').attr("data-tracked","true"),app.ctas.trackConversion(cta,variant,step,element,field_data)),element.options.script!==undefined&&""!==element.options.script&&$cf("body").append(element.options.script),element.trueActionGroup=undefined,element.action_groups!==undefined&&$cf.each(element.action_groups,function(i,action_group){("redirect"==action_group.data["confirmation-type"]&&(action_group.data["redirect-url"]||"true"==action_group.data["confirmation-close"])||"step"==action_group.data["confirmation-type"]&&action_group.data["redirect-step"]||"cta"==action_group.data["confirmation-type"]&&action_group.data["confirmation-cta"]||"message"==action_group.data["confirmation-type"]&&action_group.data.confirmation)&&element.trueActionGroup==undefined&&1==app.campaigns.checkConditions(action_group.conditions,window.convertflow.person)&&(element.trueActionGroup=action_group,Object.values(action_group.actions).forEach(function(action){app.actions.run(action,event)}))}),element.trueActionGroup!==undefined?app.ctas.runLogic(embed,cta,variant,step,section,element,element.trueActionGroup,element.trueActionGroup.data):app.ctas.runLogic(embed,cta,variant,step,section,element,undefined,element.options)},app.ctas.trackConversion=function(cta,variant,step,element,field_data){if(1==app.live&&"true"!==element.options["disable-conversion"]){var js_event={cta:cta,variant:variant,step:step,element:element};field_data&&(js_event.fields=field_data),"form"!=element.element_type&&"survey"!=element.element_type||app.visitors.fireEvent("cfSubmit",js_event),app.visitors.fireEvent("cfConversion",js_event);var payload={event_type:"Complete",variant_id:variant.id,step_id:step.id,element_id:element.id},action_groups=[];if(element.action_groups!==undefined&&$cf.each(element.action_groups,function(i,action_group){if(action_group.data["confirmation-type"]&&0==$cf.isEmptyObject(action_group.conditions)&&1==app.campaigns.checkConditions(action_group.conditions,window.convertflow.person)&&(action_groups.push(action_group.id),action_group.actions&&0<$cf.map(action_group.actions,function(action){if("Track completion of CTA"==action.action_type)return action}).length)){var completion=payload;completion.event_type="Completion",app.ctas.track(completion,cta,element)}}),0<action_groups.length&&(payload.action_groups=action_groups.join()),app.ctas.track(payload,cta,element),0<$cf.map(element.actions,function(action){if("Track completion of CTA"==action.action_type)return action}).length){var completion=payload;completion.event_type="Completion",app.ctas.track(completion,cta,element)}}},app.ctas.runLogic=function(embed,cta,variant,step,section,element,action_group,payload){if(action_group!==undefined&&action_group.data.script!==undefined&&$cf("body").append(action_group.data.script),payload["redirect-step"]===undefined||""===payload["redirect-step"]||"step"!=payload["confirmation-type"]&&payload["confirmation-type"]!=undefined)if(payload["redirect-url"]===undefined||""===payload["redirect-url"]||"redirect"!=payload["confirmation-type"]&&payload["confirmation-type"]!=undefined)if(payload["confirmation-cta"]===undefined||""===payload["confirmation-cta"]||"cta"!=payload["confirmation-type"]&&payload["confirmation-type"]!=undefined){if(("message"==payload["confirmation-type"]||payload["confirmation-type"]==undefined)&&"button"!==element.element_type){var container=$cf('.cf-element[data-id="'+element.id+'"]'),confirmation_message="Thanks!",confirmation_style="";if($cf(container).find(".element-content").remove(),payload.confirmation!==undefined&&""!==payload.confirmation)confirmation_message=payload.confirmation;if(element.options["confirmation-background-color"])confirmation_style=confirmation_style+"background: "+element.options["confirmation-background-color"]+" !important;";if(element.options["confirmation-text-color"])confirmation_style=confirmation_style+"color: "+element.options["confirmation-text-color"]+" !important;";if(element.options["field-font"])confirmation_style=confirmation_style+"font-family: "+element.options["field-font"]+" !important;";confirmation_style='style="'+confirmation_style+'"';$cf(container).html('<div class="cf-col cf-col-xs-12 cf-center cf-regular-vspace cf-horizontal-somepadding cf-thanks-message" '+confirmation_style+">"+confirmation_message+"</span>")}}else app.ctas.ctaLogic(embed,cta,variant,step,section,element,payload["confirmation-cta"]);else app.ctas.redirectLogic(embed,cta,variant,step,section,element,payload);else app.ctas.stepLogic(embed,cta,variant,step,section,element,payload["redirect-step"]);"true"==payload["confirmation-close"]&&("redirect"==payload["confirmation-type"]||"cta"==payload["confirmation-type"]||payload["confirmation-type"]==undefined&&(payload["redirect-url"]!==undefined&&""!==payload["redirect-url"]||payload["confirmation-cta"]!==undefined&&""!==payload["confirmation-cta"]||payload.confirmation==undefined||""==payload.confirmation))&&app.ctas.closeLogic(embed,cta,variant)},app.ctas.stepLogic=function(embed,cta,variant,step,section,element,redirect_step){if(redirect_step!==undefined&&variant.steps[parseInt(redirect_step)]!==undefined){var next_step=variant.steps[redirect_step];if(app.ctas.skipLogic(cta,variant,next_step,embed)==undefined&&next_step){if($cf(embed).find(".cf-step").each(function(i,step_div){$cf(step_div).attr("style",""),step_div.style.display="none"}),$cf(embed).find('.cf-step[step-id="'+redirect_step+'"]').each(function(i,step_div){$cf(step_div).attr("style",""),step_div.style.display="block"}),1==app.live&&setTimeout(function(){app.ctas.track({event_type:"View",variant_id:variant.id,step_id:next_step.id},cta)},500),element!==undefined&&"form"==element.element_type&&$cf.each(element.contactData.split("&"),function(index,elem){var vals=elem.split("=");if(-1<vals[0].indexOf("contact")&&$cf(embed).find('div[id="step_'+redirect_step+'"] form').length&&vals[1].length&&"contact%5Belement_id%5D"!==vals[0]&&"contact%5Bstep_id%5D"!==vals[0]){var step=$cf(embed).find('div[id="step_'+redirect_step+'"]');$cf(step).find(".new_contact").each(function(){$cf(this).find('input[name="'+decodeURIComponent(vals[0])+'"]').val(decodeURIComponent(vals[1].replace(/\+/g," "))),"true"==$cf(this).attr("hide-prefilled-fields")&&$cf(this).find('input[name="'+decodeURIComponent(vals[0])+'"]').hide()})}}),"page"==cta.cta_type&&window.scrollTo(0,0),"bar"==cta.cta_type&&"top"==variant.options["bar-position"]){var barHeight=$cf(embed).find(".cta").outerHeight();$cf("html").css("padding-top",barHeight+"px")}next_step!==undefined&&next_step.options.script!==undefined&&$cf("body").append(next_step.options.script)}}},app.ctas.redirectLogic=function(embed,cta,variant,step,section,element,payload){var redirect_url=payload["redirect-url"];if(-1<$cf.inArray(element.element_type,["form","survey"])&&"true"==payload["query-string"])redirect_url=function(form,redirect_url){var new_redirect_url=redirect_url;if("false"!==$cf(form).attr("data-query-string")){var paramMap={extra:{}};if($cf.each(app.helpers.personMap(),function(key,value){var option_attribute=paramMap[parameter=key]=value;if("firstname"==value){var parameter="name";option_attribute="name"}if("lastname"==value)parameter="last_name";if("website"==value)parameter="url";if("company_name"==value)parameter="company_name",option_attribute="company-name";if("company_title"==value)parameter="company_title",option_attribute="company-title";if("zipcode"==value)option_attribute="zip-code";element.options[option_attribute+"-redirect-dataname"]&&(paramMap[parameter]=element.options[option_attribute+"-redirect-dataname"])}),$cf.each(element.fields,function(field_id,field){field.parameter==undefined||""==field.parameter?paramMap.extra[field.slug]=field.slug:paramMap.extra[field.slug]=field.parameter}),-1==new_redirect_url.indexOf("?"))var query_start="?";else query_start="&";var email_input=$cf(form).find('input[name="contact[email]"]').val();if(email_input||convertflow.person.email!==undefined){if(email_input)var email_value=$cf(form).find('input[name="contact[email]"]').val();else if(convertflow.person.email!==undefined)email_value=convertflow.person.email;new_redirect_url=new_redirect_url+query_start+paramMap.email+"="+encodeURIComponent(email_value)}else new_redirect_url=new_redirect_url+query_start+paramMap.email+"=";delete paramMap.email,-1<new_redirect_url.indexOf("&amp;")&&(new_redirect_url=new_redirect_url.replace(new RegExp("&amp;","g"),"&")),$cf.each(paramMap,function(contact_field,param_key){if("extra"!==contact_field){var field=$cf(form).find('input[name="contact['+contact_field+']"]'),field_container=$cf(form).find('.cf-form-field[data-field="'+contact_field.replace("_","-")+'"]');if($cf(field).is(":visible")||"true"==$cf(field_container).attr("data-visible")){var param_value=$cf(field).val();new_redirect_url=new_redirect_url+"&"+param_key+"="+encodeURIComponent(param_value)}}else $cf.each(param_key,function(field_slug,field_param){var field=$cf(form).find('[name="contact[extra]['+field_slug+']"], .cf-survey-field[data-field="'+field_slug+'"] .cf-survey-choice[data-selected="true"]'),param_value=$cf(field).val()||$cf(field).attr("data-value");param_value&&(new_redirect_url=new_redirect_url+"&"+field_param+"="+encodeURIComponent(param_value))})})}return new_redirect_url}($cf(embed).find('form[element-id="'+element.id+'"], .cf-element[data-id="'+element.id+'"] .cf-survey'),redirect_url);if(-1==redirect_url.indexOf("http"))redirect_url="http://"+redirect_url;if(-1<redirect_url.indexOf("&amp;"))redirect_url=redirect_url.replace(new RegExp("&amp;","g"),"&");setTimeout(function(){element!==undefined&&"true"!==payload["target-blank"]?window.location=redirect_url:window.open(redirect_url)},500)},app.ctas.ctaLogic=function(embed,cta,variant,step,section,element,confirmation_cta_id){confirmation_cta_id=parseInt(confirmation_cta_id);var campaign=undefined;if(convertflow.ctas[cta.id].broadcast_id!==undefined)campaign=app.website.broadcasts[convertflow.ctas[cta.id].broadcast_id];if(convertflow.ctas[cta.id].goal_id!==undefined)campaign=app.website.goals[convertflow.ctas[cta.id].goal_id];convertflow.ctas[confirmation_cta_id]==undefined?(convertflow.load(confirmation_cta_id,campaign,function(){convertflow.trigger(confirmation_cta_id)}),convertflow.ctas[confirmation_cta_id]!==undefined&&(convertflow.ctas[confirmation_cta_id].clicktriggered=!0)):convertflow.trigger(confirmation_cta_id)},app.ctas.closeLogic=function(embed,cta,variant){if($cf(embed).hide(),"false"==variant.options.aggressive&&""!==variant.options.cookie&&app.helpers.setCookie("viewedCta"+cta.id,"true",24*parseInt(variant.options.cookie)*60),"bar"==cta.cta_type)if("bottom"==variant.options["bar-position"])$cf(embed).find(".cta").addClass("slide-up");else{var barHeight=$cf(embed).find(".cta").outerHeight();$cf("html").css("padding-top",barHeight+"px"),$cf(embed).find(".cta").addClass("slide-down")}},app.visitors.generateUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)})},app.visitors.uid=function(override){var cookie="cf_"+app.website.id+"_id",uid=app.helpers.getCookie(cookie);if(app.helpers.getCookie(cookie)==undefined||1==override){uid=app.visitors.generateUID();app.helpers.setCookie(cookie,uid,10512e3)}return uid},app.visitors.urlIdentification=function(){var email=undefined;return"true"==app.website.url_identification&&$cf.each(["cf_email","email","Email","EmailAddress","email_address","emailaddresss","inf_field_Email"],function(index,key){var parameter=app.helpers.getParameterByName(key);if(""!==parameter)return email=parameter,!1}),email},app.visitors.create=function(){(new Date).toISOString();var visitor={website_id:app.website.id,visitor_token:app.visitors.uid(),contact_id:null,landing_page:window.location.href,platform:convertflow.platform||"Web",data:{}};""!==document.referrer&&0==document.referrer.includes(location.host)&&(visitor.referral_source=document.referrer);var payload={visitor:visitor,"new":!0,utms:{}};$cf.each(["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],function(i,utm_param){var utm=app.helpers.getParameterByName(utm_param);utm&&(payload.utms[utm_param]=utm)}),$cf.ajax({type:"GET",url:app.api_visitors+app.visitors.uid(),contentType:"application/json; charset=utf-8",data:payload,dataType:"JSONP",complete:function(data){window.convertflow.person.last_requested=$cf.now(),data&&data.responseJSON&&1==data.responseJSON.logged_in&&(app.helpers.setCookie("cf_"+app.website.id+"_logged_in","true",86400),app.admin.initialize(convertflow.app.website))}}),visitor.last_requested=$cf.now(),window.convertflow.person=visitor;var continue_without_response=!0;if(1==app.geotargeting){continue_without_response=!1;app.visitors.targeting_sync_status.geolocation=!1,app.visitors.geolocation()}var integrations_to_sync=app.visitors.integrationsToSync(!0);if(integrations_to_sync&&0<integrations_to_sync.length){continue_without_response=!1;integrations_to_sync.forEach(function(integration_to_sync){app.visitors.targetingSync(integration_to_sync)})}1==continue_without_response&&app.visitors.identifyOrTarget(visitor)},app.visitors.get=function(){$cf.ajax({type:"GET",url:app.api_visitors+app.visitors.uid(),contentType:"application/json; charset=utf-8",dataType:"JSONP",timeout:5e3,success:function(person){person.last_requested=$cf.now(),app.helpers.setCookie(app.visitors.expiration_cookie,person.last_requested);person=app.visitors.appendLocalContactFields(person);window.convertflow.person=person;var continue_without_response=!0;if(1==app.geotargeting&&!convertflow.person.data.location){continue_without_response=!1;app.visitors.targeting_sync_status.geolocation=!1,app.visitors.geolocation()}var integrations_to_sync=app.visitors.integrationsToSync(!0);if(integrations_to_sync&&0<integrations_to_sync.length){continue_without_response=!1;integrations_to_sync.forEach(function(integration_to_sync){app.visitors.targetingSync(integration_to_sync)})}1==continue_without_response&&app.visitors.identifyOrTarget(person)},error:function(){app.visitors.uid(!0),app.visitors.create()}})},app.visitors.integrationsToSync=function(clear_params){var integrations_to_sync=[];return $cf.each(app.website.integrations,function(i,integration){var current_targeting_data=window.convertflow.person&&window.convertflow.person.data[integration.integration_type.toLowerCase()],can_sync_with_param=app.helpers.getParameterByName(integration.targeting_sync_parameter)&&!current_targeting_data,can_sync_with_existing_data="email"==integration.targeting_sync_id_type&&!current_targeting_data&&window.convertflow.person&&window.convertflow.person.email||current_targeting_data&&(current_targeting_data.id||"email"==integration.targeting_sync_id_type)&&current_targeting_data.last_sync&&app.helpers.parseDate(current_targeting_data.last_sync)<=Date.parse(new Date)-18e5;if(can_sync_with_param||can_sync_with_existing_data){if(can_sync_with_param){var contact_id=app.helpers.getParameterByName(integration.targeting_sync_parameter);1==clear_params&&app.visitors.removeTargetingSyncParameter(integration.targeting_sync_parameter)}if(can_sync_with_existing_data){if(current_targeting_data&&current_targeting_data.id)contact_id=current_targeting_data.id;if("email"==integration.targeting_sync_id_type&&window.convertflow.person.email)contact_id=window.convertflow.person.email}contact_id&&integrations_to_sync.push({integration_id:integration.id,integration_type:integration.integration_type,contact_id:contact_id,website_id:app.website.id})}}),integrations_to_sync},app.visitors.removeTargetingSyncParameter=function(param){if(-1!==location.search.indexOf(param+"=")){var replace="";try{var url=new URL(location);url.searchParams["delete"](param),replace=url.href}catch(ex){var regExp=new RegExp("[?&]"+param+"=.*$");replace=location.search.replace(regExp,""),replace=location.pathname+replace+location.hash}history.replaceState(null,"",replace)}},app.visitors.canUseLocal=function(localperson){var conclusion=!1,targetingSync=app.visitors.integrationsToSync(!1),local_storage_can_be_used=null!==localperson&&"true"!==app.helpers.getCookie(app.visitors.localstorage_prevent),website_id_matches=local_storage_can_be_used&&localperson.website_id!==undefined&&localperson.website_id==app.website.id,localperson_was_requested_recently=local_storage_can_be_used&&localperson.last_requested!==undefined&&localperson.last_requested>=Date.parse(new Date)-18e5,localperson_has_not_expired=local_storage_can_be_used&&(app.helpers.getCookie(app.visitors.expiration_cookie)==undefined||parseInt(app.helpers.getCookie(app.visitors.expiration_cookie))<=localperson.last_requested),localperson_last_update_matches=local_storage_can_be_used&&app.helpers.getCookie(app.visitors.localstorage_last_update)==localperson.last_updated,targeting_sync_is_not_running=!targetingSync||0==targetingSync.length,not_waiting_on_contact_processing=local_storage_can_be_used&&0==(localperson.email!==undefined&&"Contact"!==localperson.person_type);if(local_storage_can_be_used&&website_id_matches&&localperson_was_requested_recently&&targeting_sync_is_not_running&&localperson_has_not_expired&&localperson_last_update_matches&&not_waiting_on_contact_processing)conclusion=!0;return conclusion},app.visitors.appendLocalContactFields=function(person){var localperson=app.helpers.decompressAndGet(app.local_person);"Visitor"==person.person_type&&localperson&&localperson.email&&"Contact"!==localperson.person_type&&["email","name","last_name","phone","website","company_name","company_title","city","country","address","state","zip_code","extra"].forEach(function(field){"extra"!==field?!person[field]&&localperson[field]&&(person[field]=localperson[field]):!person.extra&&localperson.extra?person.extra=localperson.extra:person.extra&&localperson.extra&&Object.keys(localperson.extra).forEach(function(custom_field){person.extra[custom_field]||(person.extra[custom_field]=localperson.extra[custom_field])})});return person},app.visitors.visitEvent=function(){var visit={event_type:"Visit",visitor_token:app.visitors.uid(),url:window.location.href,website_id:app.website.id,data:{title:document.title}};return 0==$cf.isEmptyObject(app.helpers.getQueryString())&&(visit.data=$cf.extend({},visit.data,{params:app.helpers.getQueryString()})),visit},app.visitors.trackEvent=function(event,skip_database_storage){if(convertflow.person&&1==window.convertflow.readyFired){if(event.website_id=app.website.id,event.visitor_token=app.visitors.uid(),convertflow.person!==undefined){var id=convertflow.person.id;"Visitor"==convertflow.person.person_type&&(event.visitor_id=id),"Contact"==convertflow.person.person_type&&(event.contact_id=id)}-1<$cf.inArray(event.event_type,["View","Complete","Completion"])&&app.visitors.addEngagementToHistory(event),app.actions.mapEventToActions(event);var payload={};event.action_groups&&(payload.action_groups=event.action_groups,delete event.action_groups),payload.event=event,app.helpers.canStringify()&&!0!==skip_database_storage&&$cf.ajax({type:"POST",url:app.api_events,data:payload,dataType:"json",success:function(){}})}else window.convertflow.readyFired==undefined&&setTimeout(function(){app.visitors.trackEvent(event,skip_database_storage)},500)},app.visitors.identifyOrTarget=function(data){if(data.visit_already_stored)delete data.visit_already_stored;else data=app.visitors.addPageViewToHistory(data);window.convertflow.person=data,app.helpers.compressAndStore(app.local_person,data);var visit_event=app.campaigns.runVisitGoals(app.visitors.visitEvent());app.visitors.trackEvent(visit_event),app.visitors.ready();var email=app.visitors.urlIdentification();convertflow.person.email===undefined&&app.visitors.urlIdentification()!==undefined?convertflow.identify({email:email}):app.campaigns.initialize(app.website)},app.visitors.addPageViewToHistory=function(data){var person=data,url=app.helpers.cleanURL(window.location.href),time_now=app.helpers.timeNow(),fallback_session={pages:0,sessions:1,current:time_now};if(person.data.visits==undefined)var history={pages:0};else history=person.data.visits;history[url]==undefined&&(history[url]=0),history.session==undefined&&(history.session=fallback_session),app.helpers.parseDate(history.session.current)<=Date.parse(new Date)-18e5&&(
history.session.previous=history.session.current,history.session.current=time_now),history.pages=history.pages+1,history.session.pages=history.session.pages+1,history[url]=history[url]+1,person.data.visits=history;var params_current=app.helpers.getQueryString(),params_new=person.data.params||{};return $cf.each(params_current,function(key,value){params_new[key]=value}),person.data.params=params_new,person},app.visitors.addEngagementToHistory=function(event){var person=window.convertflow.person;if(person.data=person.data||{},person.data.campaigns=person.data.campaigns||{},event.contactable_id){person.data.campaigns.ctas=person.data.campaigns.ctas||{};var cta_object=person.data.campaigns.ctas[event.contactable_id]||{},cta_stats=cta_object.stats||{};if(cta_stats[event.event_type]=cta_stats[event.event_type]||0,cta_stats[event.event_type]+=1,cta_object.stats=cta_stats,event.variant_id){var variant_id=event.variant_id;cta_object.variants=cta_object.variants||{};var variant_object=cta_object.variants[variant_id]||{},variant_stats=variant_object.stats||{};if(variant_stats[event.event_type]=variant_stats[event.event_type]||0,variant_stats[event.event_type]+=1,variant_object.stats=variant_stats,event.step_id){var step_id=event.step_id;variant_object.steps=variant_object.steps||{};var step_object=variant_object.steps[step_id]||{},step_stats=step_object.stats||{};if(step_stats[event.event_type]=step_stats[event.event_type]||0,step_stats[event.event_type]+=1,step_object.stats=step_stats,event.element_id){var element_id=event.element_id;step_object.elements=step_object.elements||{};var element_object=step_object.elements[element_id]||{},element_stats=element_object.stats||{};element_stats[event.event_type]=element_stats[event.event_type]=0,element_stats[event.event_type]+=1,element_object.stats=element_stats,step_object.elements[element_id]=element_object}variant_object.steps[step_id]=step_object}cta_object.variants[variant_id]=variant_object}person.data.campaigns.ctas[event.contactable_id]=cta_object}app.helpers.compressAndStore(app.local_person,person)},app.visitors.ready=function(){window.convertflow.readyFired=!0;var trigger_ready=function(){$cf(document).trigger("cfReady");try{window.dispatchEvent(new CustomEvent("cfReady",{detail:!1}))}catch(error){}};"complete"==document.readyState?trigger_ready():$cf(document).ready(function(){trigger_ready()})},app.visitors.geolocation=function(){$cf.ajax({type:"GET",url:"https://convertflow.co/geolocation/",dataType:"JSONP",success:function(data){app.visitors.targeting_sync_status.geolocation=!0;var visitor=window.convertflow.person;visitor.data=visitor.data||{};var location={latitude:data.lat,longitude:data.lon,city:data.city,regionName:data.regionName,region:data.region,country:data.country,countryCode:data.countryCode,timezone:data.timezone,zip:data.zip};visitor.data.location=location,visitor.city=location.city,visitor.country=location.country,visitor.state=location.regionName,visitor.zip_code=location.zip,visitor.visit_already_stored=!0,Object.values(app.visitors.targeting_sync_status).includes(!1)||app.visitors.identifyOrTarget(visitor)}})},app.visitors.targetingSync=function(payload){if(app.website.integrations[payload.integration_id]){var integration_type_key=payload.integration_type.toLowerCase();app.visitors.targeting_sync_status[integration_type_key]=!1;var targeting_sync_url="https://convertflow.co/targeting-sync/?environment=production";$cf.ajax({type:"GET",url:targeting_sync_url,data:payload,dataType:"JSONP",timeout:5e3,success:function(data){if(app.visitors.targeting_sync_status[integration_type_key]=!0,convertflow.person.data[integration_type_key]=convertflow.person.data[integration_type_key]||{},convertflow.person.data[integration_type_key].last_sync=app.helpers.timeNow(),convertflow.person.last_requested=undefined,data&&0==$cf.isEmptyObject(data.contact)){var targeting_data=Object.assign({},data);payload.contact_id&&(targeting_data.id=payload.contact_id),app.visitors.storeTargetingData(integration_type_key,targeting_data),Object.keys(data).forEach(function(integration_data_key){"contact"==integration_data_key&&Object.keys(data[integration_data_key]).forEach(function(contact_attribute){convertflow.person[contact_attribute]||("email"==contact_attribute&&convertflow.identify({email:data[integration_data_key].email,override:!0}),convertflow.person[contact_attribute]=data[integration_data_key][contact_attribute])}),"contact"!==integration_data_key&&(convertflow.person.data[integration_type_key][integration_data_key]=data[integration_data_key])})}convertflow.person.visit_already_stored=!0,Object.values(app.visitors.targeting_sync_status).includes(!1)||app.visitors.identifyOrTarget(convertflow.person)},error:function(){console.log(integration_type_key+" timed out!"),app.visitors.targeting_sync_status[integration_type_key]=!0,app.visitors.identifyOrTarget(convertflow.person)}})}},app.visitors.storeTargetingData=function(integration_type,response){var targeting_data=response;targeting_data.contact&&delete targeting_data.contact;var payload={visitor_token:app.visitors.uid(),targeting_data:JSON.stringify(targeting_data),integration_type:integration_type};$cf.ajax({type:"POST",url:app.api_visitors+app.visitors.uid()+"/targeting_data",data:payload,dataType:"json",success:function(){convertflow.person.last_requested=$cf.now()}})},app.visitors.trackingUIDs=function(){$cf(window).on("load",function(){setTimeout(function(){var tracking_ids={};if(0!==Object.keys(tracking_ids).length){var endpoint=app.api_visitors+app.visitors.uid()+"/uids";$cf.ajax({type:"POST",url:endpoint,data:{visitor_token:app.visitors.uid(),uids:tracking_ids},dataType:"json"})}},1e3)})},app.visitors.trackSubmits=function(){window.convertflow&&"true"==convertflow.app.website.form_tracking&&($cf.isEmptyObject(convertflow.app.website.conditions)||1==app.campaigns.checkConditions(convertflow.app.website.conditions))&&$cf(document).on("submit","form",function(e){var form=e.target;if(0==$cf(form).hasClass("new_contact")){var fields={firstname:"name",first_name:"name",lastname:"last_name",last_name:"last_name",email:"email",Email:"email",phone:"phone",website:"url"},submission={};$cf.each(fields,function(k,v){submission[v]==undefined&&(0<$cf(form).find('input[type="'+k+'"]').length&&"hidden"!==$cf(form).find('input[type="'+k+'"]').attr("type")?submission[v]=$cf(form).find('input[type="'+k+'"]').val():0<$cf(form).find('[name*="'+k+'"]').length&&"authenticity_token"!==$cf(form).find('[name*="'+k+'"]').attr("name")&&"hidden"!==$cf(form).find('[name*="'+k+'"]').attr("type")?submission[v]=$cf(form).find('[name*="'+k+'"]').val():0<$cf(form).find('[id*="'+k+'"]').length&&"hidden"!==$cf(form).find('[id*="'+k+'"]').attr("type")?submission[v]=$cf(form).find('[id*="'+k+'"]').val():0<$cf(form).find('[placeholder*="'+k+'"]').length&&"hidden"!==$cf(form).find('[placeholder*="'+k+'"]').attr("type")&&(submission[v]=$cf(form).find('[placeholder*="'+k+'"]').val()))});var filter=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;if(submission.email!==undefined&&filter.test(submission.email)){convertflow.person.email=submission.email,submission.source_url=app.helpers.cleanURL(window.location.href);var event={event_type:"Submission",visitor_token:app.visitors.uid(),website_id:app.website.id,url:app.helpers.cleanURL(window.location.href),data:submission};$cf.ajax({type:"POST",url:app.api_events,data:{event:event,cf2:!0},dataType:"json"}),app.localstorage&&app.helpers.compressAndStore(app.local_person,convertflow.person)}}})},app.visitors.fireEvent=function(event_type,payload){var event={};payload.cta&&(event.cta={name:payload.cta.name,cta_type:payload.cta.cta_type,id:payload.cta.id}),payload.variant&&(event.variant=payload.variant.variation),payload.step&&(event.step=payload.step.position),payload.element&&(event.element=payload.element.element_type),payload.fields&&(event.fields=payload.fields),$cf(document).trigger(event_type,[event]);try{window.dispatchEvent(new CustomEvent(event_type,{detail:event}))}catch(error){}},app.admin.initialize=function(website){convertflow.person.logged_in+""!="true"&&"true"!=app.helpers.getCookie("cf_"+app.website.id+"_logged_in")||(app.helpers.setCookie("cf_"+app.website.id+"_logged_in","true",86400),"interactive"===document.readyState||"complete"===document.readyState?app.admin.load(website):$cf(document).on("ready",function(){app.admin.load(website)}))},app.admin.load=function(website){!0!==website.adminWidgetLoaded&&(website.adminWidgetLoaded=!0,$cf.ajax({type:"GET",url:app.interface_root+"admin",dataType:"JSONP",success:function(data){$cf("#cfTestStart").remove(),$cf("#cfTestWidget").remove(),$cf("body").append(data.html),$cf(document).on("cfTestReady",function(){cfTest9054(website)})}}))},app.api.identify=function(data){if(data.email!==undefined&&(convertflow.person!==undefined&&convertflow.person.email==undefined||1==data.override&&data.email!==convertflow.person.email)&&/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(data.email)){var payload={contact:{website_id:app.website.id,email:data.email,visitor_token:app.visitors.uid()}};$cf.ajax({type:"POST",url:app.api_contacts,dataType:"JSON",data:payload,success:function(){},error:function(){console.log("ConvertFlow couldn't identify contact")}}),app.localstorage&&(convertflow.person.email=data.email,app.helpers.compressAndStore(app.local_person,convertflow.person),app.ctas.resetCTAs(),app.campaigns.initialize(app.website))}},app.api.load=function(cta_id,campaign,callback){if(0==$cf("#cta"+cta_id).length){var cta=document.createElement("div");$cf(cta).attr("id","cta"+cta_id).attr("cta-id",cta_id).css("display","none"),$cf(cta).addClass("convertflow-cta"),app.website.ctas[cta_id]!==undefined&&$cf(cta).addClass("cf-"+app.website.ctas[cta_id].cta_type),app.ctas.load(cta_id,campaign,cta,callback)}},app.api.trigger=function(cta_id){$cf(document).trigger("trigger_CTA_"+cta_id)},app.api.start=function(){app.ctas.resetCTAs(),app.visitors.trackEvent(app.visitors.visitEvent()),app.campaigns.initialize(app.website)},app.helpers.domain=function(){var parts=location.hostname.split(".");if(2<parts.length&&"com"!==parts[1]&&"co"!==parts[1]&&"ac"!==parts[1]&&"org"!==parts[1]){parts.shift();var domain=parts.join(".")}else domain=location.hostname;return domain},app.helpers.page=function(){return window.location.pathname},app.helpers.timeNow=function(){return(new Date).toISOString()},app.helpers.IE=function(){var ms_ie=!1,ua=window.navigator.userAgent,old_ie=ua.indexOf("MSIE "),new_ie=ua.indexOf("Trident/"),edge=ua.indexOf("Edge/");if(-1<old_ie||-1<new_ie||-1<edge)ms_ie=!0;return ms_ie},app.helpers.setCookie=function(name,value,ttl){var expires="",cookieDomain="";if(ttl){var date=new Date;date.setTime(date.getTime()+60*ttl*1e3),expires="; expires="+date.toGMTString()}app.helpers.domain()&&(cookieDomain="; domain="+app.helpers.domain()),document.cookie=name+"="+escape(value)+expires+cookieDomain+"; path=/"},app.helpers.deleteCookie=function(name){if(name&&app.helpers.domain()){var cookieDomain="; domain="+app.helpers.domain();document.cookie=name+"="+cookieDomain+"; path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},app.helpers.getCookie=function(name){var value=new RegExp(name+"=([^;]+)").exec(document.cookie);return null!=value?unescape(value[1]):undefined},app.helpers.getParameterByName=function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(location.search);return null===results?"":app.helpers.decodeURIComponentSafe(results[1].replace(/\+/g," "))},app.helpers.isInArray=function(value,array){return-1<array.indexOf(value)},app.helpers.decodeURIComponentSafe=function(uri,mod){var arr,l,x,out=new String,i=0;for(void 0===mod&&(mod=0),l=(arr=uri.split(/(%(?:d0|d1)%.{2})/)).length;i<l;i++){try{x=decodeURIComponent(arr[i])}catch(e){x=mod?arr[i].replace(/%(?!\d+)/g,"%25"):arr[i]}out+=x}return out},app.helpers.getQueryString=function(){var search=location.search.substring(1),data={};return""!==search&&$cf.each(search.split("&"),function(i,parameter){if(-1<parameter.indexOf("=")){var param_array=parameter.split("="),key=param_array[0],value=param_array[1];data[key]=app.helpers.decodeURIComponentSafe(value)}}),data},app.helpers.canStringify=function(){return"undefined"!=typeof JSON&&"undefined"!=typeof JSON.stringify},app.helpers.cleanURL=function(url){return url.split(/[?#]/)[0].replace(/^https?\:\/\//,"").replace(/^www./,"").replace(/\s+/g,"").replace(/\/$/,"")},app.helpers.cachedScript=function(url,options){return options=$cf.extend(options||{},{dataType:"script",cache:!0,async:!0,url:url}),$cf.ajax(options)},app.helpers.capitalizeFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1)},app.helpers.libraries=function(){(function(a){a.extend(a.fn,{validate:function(b){if(this.length){var c=a.data(this[0],"validator");return c||(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.on("click.validate",":submit",function(b){c.settings.submitHandler&&(c.submitButton=b.target),a(this).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(this).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.on("submit.validate",function(b){function d(){var d,e;return!c.settings.submitHandler||(c.submitButton&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),e=c.settings.submitHandler.call(c,c.currentForm,b),c.submitButton&&d.remove(),void 0!==e&&e)}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?!(c.formSubmitted=!0):d():(c.focusInvalid(),!1)})),c)}b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var b,c,d;return a(this[0]).is("form")?b=this.validate().form():(d=[],b=!0,c=a(this[0].form).validate(),this.each(function(){(b=c.element(this)&&b)||(d=d.concat(c.errorList))}),c.errorList=d),b},rules:function(b,c){if(this.length){var d,e,f,g,h,i,j=this[0];if(b)switch(d=a.data(j.form,"validator").settings,e=d.rules,f=a.validator.staticRules(j),b){case"add":a.extend(f,a.validator.normalizeRule(c)),delete f.messages,e[j.name]=f,c.messages&&(d.messages[j.name]=a.extend(d.messages[j.name],c.messages));break;case"remove":return c?(i={},a.each(c.split(/\s/),function(b,c){i[c]=f[c],delete f[c],"required"===c&&a(j).removeAttr("aria-required")}),i):(delete e[j.name],f)}return(g=a.validator.normalizeRules(a.extend({},a.validator.classRules(j),a.validator.attributeRules(j),a.validator.dataRules(j),a.validator.staticRules(j)),j)).required&&(h=g.required,delete g.required,g=a.extend({required:h},g),a(j).attr("aria-required","true")),g.remote&&(h=g.remote,delete g.remote,g=a.extend(g,{remote:h})),g}}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+a(b).val())},filled:function(b){var c=a(b).val();return null!==c&&!!a.trim(""+c)},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(void 0===c||(2<arguments.length&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})})),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(b,c){var d=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===c.which&&""===this.elementValue(b)||-1!==a.inArray(c.keyCode,d)||(b.name in this.submitted||b.name in this.invalid)&&this.element(b)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}."),step:a.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this.form,"validator"),d="on"+b.type.replace(/^validate/,""),e=c.settings;e[d]&&!a(this).is(e.ignore)&&e[d].call(c,this,b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c,d=this.groups={};a.each(this.settings.groups,function(b,c){"string"==typeof c&&(c=c.split(/\s/)),a.each(c,function(a,c){d[c]=b})}),c=this.settings.rules,a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",b).on("click.validate","select, option, [type='radio'], [type='checkbox']",b),this.settings.invalidHandler&&a(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),a(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c,d,e=this.clean(b),f=this.validationTargetFor(e),g=this,h=!0;return void 0===f?delete this.invalid[e.name]:(this.prepareElement(f),this.currentElements=a(f),(d=this.groups[f.name])&&a.each(this.groups,function(a,b){b===d&&a!==f.name&&((e=g.validationTargetFor(g.clean(g.findByName(a))))&&e.name in g.invalid&&(g.currentElements.push(e),h=h&&g.check(e)))}),c=!1!==this.check(f),h=h&&c,this.invalid[f.name]=!c,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),a(b).attr("aria-invalid",!c)),h},showErrors:function(b){if(b){var c=this;a.extend(this.errorMap,b),this.errorList=a.map(this.errorMap,function(a,b){return{message:a,element:c.findByName(b)[0]}}),this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var b=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(b)},resetElements:function(a){var b;if(this.settings.unhighlight)for(b=0;a[b];b++)this.settings.unhighlight.call(this,a[b],this.settings.errorClass,""),this.findByName(a[b].name).removeClass(this.settings.validClass);else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)a[b]&&c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text(""),this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var d=this.name||a(this).attr("name");return!d&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=a(this).closest("form")[0]),!(d in c||!b.objectLength(a(this).rules()))&&(c[d]=!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([])},reset:function(){this.resetInternals(),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c,d,e=a(b),f=b.type;return"radio"===f||"checkbox"===f?this.findByName(b.name).filter(":checked").val():"number"===f&&"undefined"!=typeof b.validity?b.validity.badInput?"NaN":e.val():(c=b.hasAttribute("contenteditable")?e.text():e.val(),"file"===f?"C:\\fakepath\\"===c.substr(0,12)?c.substr(12):0<=(d=c.lastIndexOf("/"))?c.substr(d+1):0<=(d=c.lastIndexOf("\\"))?c.substr(d+1):c:"string"==typeof c?c.replace(/\r/g,""):c)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d,e,f=a(b).rules(),g=a.map(f,function(a,b){return b}).length,h=!1,i=this.elementValue(b);if("function"==typeof f.normalizer){if("string"!=typeof(i=f.normalizer.call(b,i)))throw new TypeError("The normalizer should return a string value.");delete f.normalizer}for(d in f){e={method:d,parameters:f[d]};try{if("dependency-mismatch"===(c=a.validator.methods[d].call(this,i,b,e.parameters))&&1===g){h=!0;continue}if(h=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,e),!1}catch(j){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+e.method+"' method.",j),j instanceof TypeError&&(j.message+=".  Exception occurred when checking element "+b.id+", check the '"+e.method+"' method."),j}}if(!h)return this.objectLength(f)&&this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){var d=this.findDefined(this.customMessage(b.name,c.method),this.customDataMessage(b,c.method),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c.method],"<strong>Warning: No message defined for "+b.name+"</strong>"),e=/\$?\{(\d+)\}/g;return"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),d},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b);this.errorList.push({message:c,element:a,method:b.method}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d,e,f,g,h=this.errorsFor(b),i=this.idOrName(b),j=a(b).attr("aria-describedby");h.length?(h.removeClass(this.settings.validClass).addClass(this.settings.errorClass),h.html(c)):(d=h=a("<"+this.settings.errorElement+">").attr("id",i+"-error").addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=h.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(d):this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b),h.is("label")?h.attr("for",i):0===h.parents("label[for='"+this.escapeCssMeta(i)+"']").length&&(f=h.attr("id"),j?j.match(new RegExp("\\b"+this.escapeCssMeta(f)+"\\b"))||(j+=" "+f):j=f,a(b).attr("aria-describedby",j),(e=this.groups[b.name])&&(g=this,a.each(g.groups,function(b,c){c===e&&a("[name='"+g.escapeCssMeta(b)+"']",g.currentForm).attr("aria-describedby",h.attr("id"))})))),!c&&this.settings.success&&(h.text(""),"string"==typeof this.settings.success?h.addClass(this.settings.success):this.settings.success(h,b)),this.toShow=this.toShow.add(h)},errorsFor:function(b){var c=this.escapeCssMeta(this.idOrName(b)),d=a(b).attr("aria-describedby"),e="label[for='"+c+"'], label[for='"+c+"'] *";return d&&(e=e+", #"+this.escapeCssMeta(d).replace(/\s+/g,", #")),this.errors().filter(e)},escapeCssMeta:function(a){return a.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name)),a(b).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+this.escapeCssMeta(b)+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return!this.dependTypes[typeof a]||this.dependTypes[typeof a](a,b)},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,a(b).addClass(this.settings.pendingClass),this.pending[b.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],a(b).removeClass(this.settings.pendingClass),c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b,c){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,{method:c})})},destroy:function(){this.resetForm(),a(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},normalizeAttributeRule:function(a,b,c,d){/min|max|step/.test(c)&&(null===b||/number|range|text/.test(b))&&(d=Number(d),isNaN(d)&&(d=void 0)),d||0===d?a[c]=d:b===c&&"range"!==b&&(a[c]=!0)},attributeRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)"required"===c?(""===(d=b.getAttribute(c))&&(d=!0),d=!!d):d=f.attr(c),this.normalizeAttributeRule(e,g,c,d);return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)d=f.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase()),this.normalizeAttributeRule(e,g,c,d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(!1!==e){if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0===e.param||e.param:(a.data(c.form,"validator").resetElements(a(c)),delete b[d])}}else delete b[d]}),a.each(b,function(d,e){b[d]=a.isFunction(e)&&"normalizer"!==d?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(null!=b.min&&null!=b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),null!=b.minlength&&null!=b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"!==c.nodeName.toLowerCase())return this.checkable(c)?0<this.getLength(b,c):0<b.length;var e=a(c).val();return e&&0<e.length},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a).toString())},
dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||d<=e},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e<=d},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||c<=a},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},step:function(b,c,d){var e=a(c).attr("type"),f="Step attribute on input type "+e+" is not supported.",g=["text","number","range"],h=new RegExp("\\b"+e+"\\b");if(e&&!h.test(g.join()))throw new Error(f);return this.optional(c)||b%d==0},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.not(".validate-equalTo-blur").length&&e.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d,e){if(this.optional(c))return"dependency-mismatch";e="string"==typeof e&&e||"remote";var f,g,h,i=this.previousValue(c,e);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),i.originalMessage=i.originalMessage||this.settings.messages[c.name][e],this.settings.messages[c.name][e]=i.message,d="string"==typeof d&&{url:d}||d,h=a.param(a.extend({data:b},d.data)),i.old===h?i.valid:(i.old=h,(f=this).startRequest(c),(g={})[c.name]=b,a.ajax(a.extend(!0,{mode:"abort",port:"validate"+c.name,dataType:"json",data:g,context:f.currentForm,success:function(a){var d,g,h,j=!0===a||"true"===a;f.settings.messages[c.name][e]=i.originalMessage,j?(h=f.formSubmitted,f.resetInternals(),f.toHide=f.errorsFor(c),f.formSubmitted=h,f.successList.push(c),f.invalid[c.name]=!1,f.showErrors()):(d={},g=a||f.defaultMessage(c,{method:e,parameters:b}),d[c.name]=i.message=g,f.invalid[c.name]=!0,f.showErrors(d)),i.valid=j,f.stopRequest(c,j)}},d)),"pending")}}});var b,c={};a.ajaxPrefilter?a.ajaxPrefilter(function(a,b,d){var e=a.port;"abort"===a.mode&&(c[e]&&c[e].abort(),c[e]=d)}):(b=a.ajax,a.ajax=function(d){var e=("mode"in d?d:a.ajaxSettings).mode,f=("port"in d?d:a.ajaxSettings).port;return"abort"===e?(c[f]&&c[f].abort(),c[f]=b.apply(this,arguments),c[f]):b.apply(this,arguments)})})($cf)},app.helpers.personMap=function(){return{name:"firstname",last_name:"lastname",email:"email",phone:"phone",website:"website",company_name:"company_name",company_title:"company_title",city:"city",country:"country",address:"address",state:"state",zip_code:"zipcode"}},app.localstorage=function(){if(0!=app.helpers.IE())return!1;try{return!!localStorage.getItem}catch(exception){return!1}}();var localStorageSpace=function(){if(app.localstorage){var allStrings="";for(var key in window.localStorage)window.localStorage.hasOwnProperty(key)&&(allStrings+=window.localStorage[key]);return allStrings?3+16*allStrings.length/8192:"0"}return"0"};if(app.localstorage){var localCompress=function(){function o(o,r){if(!t[o]){t[o]={};for(var n=0;n<o.length;n++)t[o][o.charAt(n)]=n}return t[o][r]}var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",t={},i={compressToBase64:function(o){if(null==o)return"";var r=i._compress(o,6,function(o){return n.charAt(o)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(e){return o(n,r.charAt(e))})},compressToUTF16:function(o){return null==o?"":i._compress(o,15,function(o){return r(o+32)})+" "},decompressFromUTF16:function(o){return null==o?"":""==o?null:i._decompress(o.length,16384,function(r){return o.charCodeAt(r)-32})},compressToUint8Array:function(o){for(var r=i.compress(o),n=new Uint8Array(2*r.length),e=0,t=r.length;e<t;e++){var s=r.charCodeAt(e);n[2*e]=s>>>8,n[2*e+1]=s%256}return n},decompressFromUint8Array:function(o){if(null==o)return i.decompress(o);for(var n=new Array(o.length/2),e=0,t=n.length;e<t;e++)n[e]=256*o[2*e]+o[2*e+1];var s=[];return n.forEach(function(o){s.push(r(o))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(o){return null==o?"":i._compress(o,6,function(o){return e.charAt(o)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(n){return o(e,r.charAt(n))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(o,r,n){if(null==o)return"";var e,t,i,s={},p={},u="",c="",a="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<o.length;i+=1)if(u=o.charAt(i),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=f++,p[u]=!0),c=a+u,Object.prototype.hasOwnProperty.call(s,c))a=c;else{if(Object.prototype.hasOwnProperty.call(p,a)){if(a.charCodeAt(0)<256){for(e=0;e<h;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=a.charCodeAt(0),e=0;e<8;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;e<h;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=a.charCodeAt(0),e=0;e<16;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete p[a]}else for(t=s[a],e=0;e<h;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++),s[c]=f++,a=String(u)}if(""!==a){if(Object.prototype.hasOwnProperty.call(p,a)){if(a.charCodeAt(0)<256){for(e=0;e<h;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=a.charCodeAt(0),e=0;e<8;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;e<h;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=a.charCodeAt(0),e=0;e<16;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete p[a]}else for(t=s[a],e=0;e<h;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++)}for(t=2,e=0;e<h;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==r-1){d.push(n(m));break}v++}return d.join("")},decompress:function(o){return null==o?"":""==o?null:i._decompress(o.length,32768,function(r){return o.charCodeAt(r)})},_decompress:function(o,n,e){var i,s,p,u,c,a,l,f=[],h=4,d=4,m=3,v="",w=[],A={val:e(0),position:n,index:1};for(i=0;i<3;i+=1)f[i]=i;for(p=0,c=Math.pow(2,2),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(0<u?1:0)*a,a<<=1;switch(p){case 0:for(p=0,c=Math.pow(2,8),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(0<u?1:0)*a,a<<=1;l=r(p);break;case 1:for(p=0,c=Math.pow(2,16),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(0<u?1:0)*a,a<<=1;l=r(p);break;case 2:return""}for(s=f[3]=l,w.push(l);;){if(A.index>o)return"";for(p=0,c=Math.pow(2,m),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(0<u?1:0)*a,a<<=1;switch(l=p){case 0:for(p=0,c=Math.pow(2,8),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(0<u?1:0)*a,a<<=1;f[d++]=r(p),l=d-1,h--;break;case 1:for(p=0,c=Math.pow(2,16),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(0<u?1:0)*a,a<<=1;f[d++]=r(p),l=d-1,h--;break;case 2:return w.join("")}if(0==h&&(h=Math.pow(2,m),m++),f[l])v=f[l];else{if(l!==d)return null;v=s+s.charAt(0)}w.push(v),f[d++]=s+v.charAt(0),s=v,0==--h&&(h=Math.pow(2,m),m++)}}};return i}();"function"==typeof define&&define.amd?define(function(){return localCompress}):"undefined"!=typeof module&&null!=module&&(module.exports=localCompress)}app.helpers.compressAndStore=function(key,object){if(app.localstorage){if(localStorageSpace()<1e3){var timestamp=Date.now();return object.last_updated=timestamp,app.helpers.setCookie(app.visitors.localstorage_last_update,timestamp),localStorage.setItem(key,localCompress.compress(JSON.stringify(object)))}return null}return null},app.helpers.decompressAndGet=function(key){if(!app.localstorage)return null;var data=localStorage.getItem(key);if(null===data)return null;try{return JSON.parse(localCompress.decompress(data))}catch(e){return null}},1==app.helpers.IE()&&"function"==typeof window.CustomEvent==0&&(CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent),app.helpers.parseDate=function(date){if(-1==date.indexOf("T")){var lastIndex=date.lastIndexOf(" ");if(-1<date.indexOf("0000"))var formatted_date=date.substring(0,lastIndex).replace(" ","T")+"Z";else{var timezone=date.split(" ").pop(),len=(formatted_date=date.substring(0,lastIndex).replace(" ","T"),timezone.length);formatted_date=formatted_date+(timezone.substring(0,len-2)+":"+timezone.substring(len-2))}var parsed_date=Date.parse(formatted_date)}else formatted_date=date,parsed_date=Date.parse(formatted_date);return parsed_date},app.helpers.nestedGet=function(obj,path,defaultValue){var result=String.prototype.split.call(path,/[,[\].]+?/).filter(Boolean).reduce(function(res,key){return null!==res&&res!==undefined?res[key]:res},obj);return result===undefined||result===obj?defaultValue:result},window.convertflow=app.api,delete app.api,window.convertflow.app=app,(0==new RegExp("(googlebot/|Googlebot-Mobile|bot|pingdom|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)","i").test(navigator.userAgent)||document.body.classList.contains("convertflow-page"))&&usejQuery(app)}():console.log("Uh oh! ConvertFlow script is already installed.");
